\subsection{Cones over diagrams}
To formally define limits and colimits, we first need to define more precisely what is meant by a diagram in a category.
\begin{definition}
    Let \( J \) be a category, which will almost always be small, and often finite.
    A \emph{diagram} of shape \( J \) in a category \( \mathcal C \) is a functor \( D : J \to \mathcal C \).
\end{definition}
We call the objects \( D(j) \) the \emph{vertices} of the diagram, and the morphisms \( D(\alpha) \) the \emph{edges} of the diagram.
\begin{example}
    Let \( J \) be the finite category
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzEsMSwiXFxidWxsZXQiXSxbMCwxLCJcXGJ1bGxldCJdLFswLDFdLFsxLDJdLFswLDJdLFswLDNdLFszLDJdXQ==
\[\begin{tikzcd}
	\bullet & \bullet \\
	\bullet & \bullet
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-1, to=2-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
    A diagram of shape \( J \) in \( \mathcal C \) is exactly a commutative square in \( \mathcal C \).
    The diagonal arrow is required to make \( J \) into a category.
\end{example}
\begin{example}
    Let \( J \) be the finite category
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJcXGJ1bGxldCJdLFsxLDAsIlxcYnVsbGV0Il0sWzEsMSwiXFxidWxsZXQiXSxbMCwxLCJcXGJ1bGxldCJdLFswLDFdLFsxLDJdLFswLDNdLFszLDJdLFswLDIsIiIsMSx7Im9mZnNldCI6LTJ9XSxbMCwyLCIiLDEseyJvZmZzZXQiOjJ9XV0=
\[\begin{tikzcd}
	\bullet & \bullet \\
	\bullet & \bullet
	\arrow[from=1-1, to=1-2]
	\arrow[from=1-2, to=2-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=2-1, to=2-2]
	\arrow[shift left=1, from=1-1, to=2-2]
	\arrow[shift right=1, from=1-1, to=2-2]
\end{tikzcd}\]
    Then a diagram of shape \( J \) in \( \mathcal C \) is a square of objects in \( \mathcal C \) whose morphisms may or may not commute. 
\end{example}
\begin{definition}
    Let \( D \) be a diagram of shape \( J \) in \( \mathcal C \).
    A \emph{cone over \( D \)} consists of an object \( C \in \ob \mathcal C \) called the \emph{apex} of the cone, together with morphisms \( \lambda_j : A \to D(j) \) called the \emph{legs} of the cone, such that all triangles of the following form commute.
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJBIl0sWzAsMSwiRChqKSJdLFsyLDEsIkQoaicpIl0sWzAsMSwiXFxsYW1iZGFfaiIsMl0sWzEsMiwiRChcXGFscGhhKSIsMl0sWzAsMiwiXFxsYW1iZGFfe2onfSJdXQ==
\[\begin{tikzcd}
	& A \\
	{D(j)} && {D(j')}
	\arrow["{\lambda_j}"', from=1-2, to=2-1]
	\arrow["{D(\alpha)}"', from=2-1, to=2-3]
	\arrow["{\lambda_{j'}}", from=1-2, to=2-3]
\end{tikzcd}\]
\end{definition}
We can define the notion of a morphism between cones.
\begin{definition}
    Let \( (A, \lambda_j), (B, \mu_j) \) be cones over a diagram \( D \) of shape \( J \) in \( \mathcal C \).
    Then a \emph{morphism of cones} is a morphism \( f : A \to B \) such that all triangles of the following form commute.
    % https://q.uiver.app/#q=WzAsMyxbMCwwLCJBIl0sWzIsMCwiQiJdLFsxLDEsIkQoaikiXSxbMCwxLCJmIl0sWzEsMiwiXFxtdV9qIl0sWzAsMiwiXFxsYW1iZGFfaiIsMl1d
\[\begin{tikzcd}
	A && B \\
	& {D(j)}
	\arrow["f", from=1-1, to=1-3]
	\arrow["{\mu_j}", from=1-3, to=2-2]
	\arrow["{\lambda_j}"', from=1-1, to=2-2]
\end{tikzcd}\]
\end{definition}
This makes the class of cones over a diagram \( D \) into a category, which will be denoted \( \operatorname{Cone}(D) \).
\begin{remark}
    A cone over a diagram \( D \) with apex \( A \) is the same as a natural transformation from the constant diagram \( \Delta A \) to \( D \), as we can expand the commutative triangles into the following form.
    % https://q.uiver.app/#q=WzAsNCxbMCwwLCJBIl0sWzEsMCwiQSJdLFsxLDEsIkQoaicpIl0sWzAsMSwiRChqKSJdLFswLDEsIjFfQSJdLFsxLDIsIlxcbGFtYmRhX3tqJ30iXSxbMCwzLCJcXGxhbWJkYV9qIiwyXSxbMywyLCJEKFxcYWxwaGEpIiwyXV0=
\[\begin{tikzcd}
	A & A \\
	{D(j)} & {D(j')}
	\arrow["{1_A}", from=1-1, to=1-2]
	\arrow["{\lambda_{j'}}", from=1-2, to=2-2]
	\arrow["{\lambda_j}"', from=1-1, to=2-1]
	\arrow["{D(\alpha)}"', from=2-1, to=2-2]
\end{tikzcd}\]
    Note that \( \Delta \) is a functor \( \mathcal C \to [J, \mathcal C] \), and thus \( \operatorname{Cone}(D) \) is exactly the comma category \( (\Delta \downarrow D) \). 
\end{remark}

\subsection{Limits}
\begin{definition}
    A \emph{limit} for a diagram \( D \) of shape \( J \) in \( \mathcal C \) is a terminal object in the category of cones over \( D \).
    Dually, a \emph{colimit} for \( D \) is an initial object in the category of cones under \( D \).
\end{definition}
A cone under a diagram is often called a \emph{cocone}.
\begin{remark}
    Using the fact that \( \operatorname{Cone}(D) = (\Delta \downarrow D) \) where \( \Delta : \mathcal C \to [J, \mathcal C] \), the category \( \mathcal C \) has limits for all diagrams of shape \( J \) if and only if \( \Delta \) has a right adjoint.
\end{remark}
\begin{example}
    \begin{enumerate}
        \item If \( J \) is the empty category, there is a unique diagram \( D \) of shape \( J \) in any category \( \mathcal C \).
        Thus, a cone over this diagram is just an object in \( \mathcal C \), and morphisms of cones are just morphisms in \( \mathcal C \).
        In particular, \( \operatorname{Cone}(D) \cong \mathcal C \), so a limit for \( D \) is a terminal object in \( \mathcal C \).
        Dually, a colimit of the empty diagram is an initial object.
        \item Let \( J \) be the discrete category with two objects.
        A diagram of shape \( J \) in \( \mathcal C \) is thus a pair of objects.
        A cone over this diagram is a \emph{span}.
        \[\begin{tikzcd}
            & C \\
            A && B
            \arrow[from=1-2, to=2-1]
            \arrow[from=1-2, to=2-3]
        \end{tikzcd}\]
        A limit cone is precisely a categorical product \( A \times B \).
        \[\begin{tikzcd}
            & {A \times B} \\
            A && B
            \arrow["{\pi_1}"', from=1-2, to=2-1]
            \arrow["{\pi_2}", from=1-2, to=2-3]
        \end{tikzcd}\]
        Similarly, the colimit for a pair of objects is a categorical coproduct \( A + B \).
        \item If \( J \) is any discrete category, a diagram of shape \( J \) is a family of objects \( A_j \) in \( \mathcal C \) indexed by the objects of \( J \).
        Limits and colimits over this diagram are products and coproducts of the \( A_j \).
        \item If \( J \) is the category \( \bullet \rightrightarrows \bullet \), a diagram of shape \( J \) is a parallel pair of morphisms \( f, g : A \rightrightarrows B \).
        A cone over such a parallel pair is
        % https://q.uiver.app/#q=WzAsMyxbMSwwLCJDIl0sWzAsMSwiQSJdLFsyLDEsIkIiXSxbMCwxLCJoIiwyXSxbMCwyLCJrIl0sWzEsMiwiZiIsMCx7Im9mZnNldCI6LTJ9XSxbMSwyLCJnIiwyLHsib2Zmc2V0IjoyfV1d
\[\begin{tikzcd}
	& C \\
	A && B
	\arrow["h"', from=1-2, to=2-1]
	\arrow["k", from=1-2, to=2-3]
	\arrow["f", from=2-1, to=2-3]
	\arrow["g"', shift right=2, from=2-1, to=2-3]
\end{tikzcd}\]
        satisfying \( fh = k = gh \).
        Equivalently, it is a morphism \( h : C \to A \) satisfying \( fh = gh \).
        Thus, a limit is an equaliser, and dually, a colimit is a coequaliser.
        \item Let \( J \) be the category
        % https://q.uiver.app/#q=WzAsMyxbMSwwLCJcXGJ1bGxldCJdLFsxLDEsIlxcYnVsbGV0Il0sWzAsMSwiXFxidWxsZXQiXSxbMCwxXSxbMiwxXV0=
\[\begin{tikzcd}
	& \bullet \\
	\bullet & \bullet
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
        A diagram of shape \( J \) is thus a cospan in \( \mathcal C \).
        % https://q.uiver.app/#q=WzAsMyxbMSwwLCJBIl0sWzEsMSwiQyJdLFswLDEsIkIiXSxbMCwxLCJmIl0sWzIsMSwiZyIsMl1d
\[\begin{tikzcd}
	& A \\
	B & C
	\arrow["f", from=1-2, to=2-2]
	\arrow["g"', from=2-1, to=2-2]
\end{tikzcd}\]
        A cone over this diagram is
        % https://q.uiver.app/#q=WzAsNCxbMSwwLCJBIl0sWzEsMSwiQyJdLFswLDEsIkIiXSxbMCwwLCJEIl0sWzAsMSwiZiJdLFsyLDEsImciLDJdLFszLDAsImgiXSxbMywxLCJcXGVsbCIsMl0sWzMsMiwiayIsMl1d
\[\begin{tikzcd}
	D & A \\
	B & C
	\arrow["f", from=1-2, to=2-2]
	\arrow["g"', from=2-1, to=2-2]
	\arrow["h", from=1-1, to=1-2]
	\arrow["\ell"', from=1-1, to=2-2]
	\arrow["k"', from=1-1, to=2-1]
\end{tikzcd}\]
        where \( \ell = fh = gk \) is redundant.
        Thus a cone is a span that completes the commutative square.
        A limit for the cospan is the universal way to complete this commutative square, which is called a \emph{pullback} of \( f \) and \( g \).
        Dually, colimits of spans are called \emph{pushouts}.

        If any category \( \mathcal C \) has binary products and equalisers, we can construct all pullbacks.
        First, we construct the product \( A \times B \), then we form the equaliser of \( f \pi_1, g \pi_2 : A \times B \rightrightarrows C \).
        This yields the pullback.
        \item Let \( M \) be the two-element monoid \( \qty{1, e} \) with \( e^2 = e \).
        A diagram of shape \( M \) in a category \( \mathcal C \) is an object of \( \mathcal C \) equipped with an idempotent endomorphism.
        A cone over this diagram is a morphism \( f : B \to A \) such that \( ef = f \).
        A limit (respectively colimit) is the monic (respectively epic) part of a splitting of \( e \).
        This is because the pair \( (e, 1_A) \) has an equaliser if and only if \( e \) splits.
        % Note that the functor \( F : \mathbf{Set} \to [M, \mathbf{Set}] \) is the constant map \( \Delta \), which explains why the left and right adjoints coincide. % what is 3.2(e)?
        \item Let \( \mathbb N \) be the poset category of the natural numbers.
        A diagram of shape \( \mathbb N \) is a \emph{direct sequence} of objects, which consists of objects \( A_0, A_1, \dots \) and morphisms \( f_i : A_i \to A_{i+1} \).
        A colimit for this diagram is a \emph{direct limit}, which consists of an object \( A_\infty \) and morphisms \( g_i : A_i \to A_\infty \) which are compatible with the \( f_i \).
        Dually, an \emph{inverse sequence} is a diagram of shape \( \mathbb N^\cop \), and a limit for this diagram is called an \emph{inverse limit}.
        For example, an infinite-dimensional CW-complex \( X \) is the direct limit of its \( n \)-dimensional skeletons in \( \mathbf{Top} \).
        The ring of \( p \)-adic integers is the limit of the inverse sequence defined by \( A_n = \faktor{\mathbb Z}{p^n\mathbb Z} \) in \( \mathbf{Rng} \).
    \end{enumerate}
\end{example}
\begin{lemma}
    Let \( \mathcal C \) be a category.
    \begin{enumerate}
        \item If \( \mathcal C \) has equalisers and all small products, then \( \mathcal C \) has all small limits.
        \item If \( \mathcal C \) has equalisers and all finite products, then \( \mathcal C \) has all finite limits.
        \item If \( \mathcal C \) has pullbacks and a terminal object, then \( \mathcal C \) has all finite limits.
    \end{enumerate}
\end{lemma}
Note that the empty product is implicitly included in (i) and (ii).
A terminal object is a product over no factors.
\begin{proof}
    \emph{Parts (i) and (ii).}
    We prove (i) and (ii) in the same way.
    Let \( D : J \to \mathcal C \) be a diagram.
    We form the products
    \[ P = \prod_{j \in \ob J} D(j);\quad Q = \prod_{\alpha \in \mor J} D(\cod \alpha) \]
    These are small or finite as required.
    We have morphisms \( f, g : P \rightrightarrows Q \) defined by
    \[ \pi_\alpha f = \pi_{\cod \alpha};\quad \pi_\alpha g = D(\alpha) \pi_{\dom \alpha} \]
    Let \( e : E \to P \) be an equaliser for \( f \) and \( g \), and define \( \lambda_j = \pi_j e : E \to D(j) \).
    These morphisms form a cone, since if \( \alpha : j \to j' \), we have
    \[ D(\alpha) \lambda_j = D(\alpha) \pi_j e = \pi_\alpha g e = \pi_\alpha f e = \pi_{j'} e = \lambda_{j'} \]
    Given any cone \( (A, (\mu_j)_{j \in \ob J}) \) over \( D \), we have a unique \( \mu : A \to P \) with \( \pi_j \mu = \mu_j \) for all \( j \).
    Then,
    \[ \pi_\alpha f \mu = \mu_{\cod \alpha} = D(\alpha) \mu_{\dom \alpha} = \pi_\alpha g \mu \]
    for all \( \alpha \), so \( \mu \) factors uniquely through \( e \).
    
    \emph{Part (iii).}
    We show that the hypotheses of (iii) imply those of (ii).
    If \( 1 \) is the terminal object, we form the pullback of the span
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJBIl0sWzEsMSwiMSJdLFswLDEsIkIiXSxbMCwxXSxbMiwxXV0=
\[\begin{tikzcd}
	& A \\
	B & 1
	\arrow[from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
\end{tikzcd}\]
    This has the universal property of the product \( A \times B \), so \( \mathcal C \) has binary products and hence all finite products by induction.
    To construct the equaliser of \( f, g : A \rightrightarrows B \), we consider the pullback of
    % https://q.uiver.app/#q=WzAsMyxbMSwwLCJBIl0sWzEsMSwiQSBcXHRpbWVzIEIiXSxbMCwxLCJBIl0sWzAsMSwiKDFfQSwgZikiXSxbMiwxLCIoMV9BLCBnKSIsMl1d
\[\begin{tikzcd}
	& A \\
	A & {A \times B}
	\arrow["{(1_A, f)}", from=1-2, to=2-2]
	\arrow["{(1_A, g)}"', from=2-1, to=2-2]
\end{tikzcd}\]
    Any cone over this diagram has its two legs \( C \rightrightarrows A \) equal, so a pullback is an equaliser for \( f, g \).
\end{proof}
\begin{definition}
    A category is called \emph{complete} if it has all small limits, and \emph{cocomplete} if it has all small colimits.
\end{definition}
\begin{example}
    The categories \( \mathbf{Set}, \mathbf{Gp}, \mathbf{Top} \) are complete and cocomplete.
\end{example}

\subsection{Preservation and creation}
\begin{definition}
    Let \( G : \mathcal D \to \mathcal C \) be a functor.
    We say that \( G \)
    \begin{enumerate}
        \item \emph{preserves} limits of shape \( J \) if whenever \( D : J \to \mathcal D \) is a diagram with limit cone \( (L, (\lambda_j)_{j \in \ob J}) \), the cone \( (GL, (G\lambda_j)_{j \in \ob J}) \) is a limit for \( GD \);
        \item \emph{reflects} limits of shape \( J \) if whenever \( D : J \to \mathcal D \) is a diagram and \( (L, (\lambda_j)_{j \in \ob J}) \) is a cone such that \( (GL, (G\lambda_j)_{j \in \ob J}) \) is a limit for \( GD \), then \( (L, (\lambda_j)_{j \in \ob J}) \) is a limit for \( D \);
        \item \emph{creates} limits of shape \( J \) if whenever \( D : J \to \mathcal D \) is a diagram with limit cone \( (M, (\mu_j)_{j \in \ob J}) \) for \( GD \) in \( \mathcal C \), there exists a cone \( (L, (\lambda_j)_{j \in \ob J}) \) over \( D \) such that \( (GL, (G\lambda_j)_{j \in \ob J}) \cong (M, (\mu_j)_{j \in \ob J}) \) in \( \operatorname{Cone}(GD) \), and any such cone is a limit for \( D \).
    \end{enumerate}
\end{definition}
We typically assume in (i) that \( \mathcal D \) has all limits of shape \( J \), and we assume in (ii) and (iii) that \( \mathcal C \) has all limits of shape \( J \).
With these assumptions, \( G \) creates limits of shape \( J \) if and only if \( G \) preserves and reflects limits, and \( \mathcal D \) has all limits of shape \( J \).
\begin{corollary}
    In any of the statements of the previous lemma, we can replace both instances of `\( \mathcal C \) has' by either `\( \mathcal D \) has and \( G : \mathcal D \to \mathcal C \) preserves' or `\( \mathcal C \) has and \( G : \mathcal D \to \mathcal C \) creates'.
\end{corollary}
\begin{example}
    \begin{enumerate}
        \item The forgetful functor \( U : \mathbf{Gp} \to \mathbf{Set} \) creates all small limits.
        It does not preserve colimits, as in particular it does not preserve coproducts.
        \item The forgetful functor \( U : \mathbf{Top} \to \mathbf{Set} \) preserves all small limits and colimits, but does not reflect them, as we can retopologise the apex of a limit cone.
        \item The inclusion \( \mathbf{AbGp} \to \mathbf{Gp} \) reflects coproducts, but does not preserve them.
        A free product of two groups \( G, H \) is always nonabelian, except for the case where either \( G \) or \( H \) is the trivial group, but the coproduct of the trivial group with \( H \) is isomorphic to \( H \) in both categories.
    \end{enumerate}
\end{example}
