\subsection{???}
\begin{definition}
    Let \( A \) be an \( R \)-algebra, and let \( x \in A \).
    Then \( x \) is \emph{integral} over \( R \) if there exists a monic polynomial \( f \in R[T] \) such that \( f(x) = 0 \). 
\end{definition}
\begin{example}
    \begin{enumerate}
        \item If \( R = k \) is a field, then \( x \) is integral over \( k \) if and only if \( x \) is algebraic over \( k \).
        \item We will prove later that
        \begin{enumerate}
            \item the \( \mathbb Z \)-integral elements of \( \mathbb Q \) are \( \mathbb Z \);
            \item the \( \mathbb Z \)-integral elements of \( \mathbb Q\qty[\sqrt{2}] \) are \( \mathbb Z\qty[\sqrt{2}] \);
            \item the \( \mathbb Z \)-integral elements of \( \mathbb Q\qty[\sqrt{5}] \) are \( \mathbb Z\qty[\frac{1+\sqrt{5}}{2}] \supsetneq \mathbb Z\qty[\sqrt{5}] \).
        \end{enumerate}
    \end{enumerate}
\end{example}
\begin{definition}
    Let \( M \) be an \( R \)-module.
    We say that \( M \) is \emph{faithful} if the structure homomorphism \( \rho : R \to \End M \) is injective.
    Equivalently, for every nonzero ring element \( r \), there exists \( m \in M \) such that \( rm \neq 0 \).
\end{definition}
\begin{example}
    Let \( R \subseteq A \) be rings, and let \( A \) be an \( R \)-module in the natural way.
    Then \( A \) is a faithful \( R \)-module, as if \( r \neq 0 \), then \( r 1_A = r \neq 0 \).
\end{example}
\begin{proposition}
    Let \( R \subseteq A \) be rings and \( x \in A \), and consider \( A \) as an \( R[x] \)-module.
    Then \( x \) is integral over \( R \) if and only if there exists \( M \subseteq A \) such that
    \begin{enumerate}
        \item \( M \) is a faithful \( R[x] \)-module; and
        \item \( M \) is finitely generated as an \( R \)-module.
    \end{enumerate}
\end{proposition}
Condition (i) is that \( M \) is an \( R \)-submodule of \( A \), \( xM \subseteq M \), and \( M \) is faithful over \( R[x] \).
\begin{proof}
    First, assume conditions (i) and (ii) hold.
    We have an \( R \)-linear map \( f : M \to M \) given by multiplication by \( x \), as \( xM \subseteq M \).
    As \( M \) is a finitely generated \( R \)-module, we can apply the Cayley--Hamilton theorem to find
    \[ f^n + r_1 f^{n-1} + \dots + r_n f^0 =  0;\quad r_i \in R \]
    in \( \End_R M \).
    Then, evaluating at \( m \in M \),
    \[ (x^n + r_1 x^{n-1} + \dots + r_n x^0) m = 0 \]
    As this holds for all \( m \), and \( M \) is a faithful \( R[x] \)-module, we must have
    \[ x^n + r_1 x^{n-1} + \dots + r_n x^0 = 0 \]
    Thus \( x \) is integral over \( R \).

    Now suppose \( x \) is integral over \( R \).
    Then
    \[ x^n + r_1 x^{n-1} + \dots + r_n x^0 = 0 \]
    for some \( r_1, \dots, r_n \in R \).
    We define
    \[ M = \vecspan_R \qty{x_0, \dots, x^{n-1}} \]
    This is finitely generated, and satisfies \( xM \subseteq M \).
    \( M \) is faithful over \( R[x] \) as it contains \( x^0 = 1 \).
\end{proof}
\begin{definition}
    Let \( A \) be an \( R \)-algebra.
    Then \( A \) is
    \begin{enumerate}
        \item \emph{integral} over \( R \), if all of its elements are integral over \( R \);
        \item \emph{finite} over \( R \), if \( A \) is finitely generated as an \( R \)-module.
    \end{enumerate}
\end{definition}
\begin{proposition}
    Let \( A \) be an \( R \)-algebra.
    Then the following are equivalent.
    \begin{enumerate}
        \item \( A \) is a finitely generated \( R \)-algebra and is integral over \( R \);
        \item \( A \) is generated as an \( R \)-algebra by a finite set of integral elements;
        \item \( A \) is finite over \( R \).
    \end{enumerate}
\end{proposition}
\begin{proof}
    \emph{(i) implies (ii).}
    The generators for \( A \) are integral.

    \emph{(ii) implies (iii).}
    Suppose \( A \) is generated by \( \alpha_1, \dots, \alpha_m \) as an \( R \)-algebra, and the \( \alpha_i \) are integral over \( R \).
    As \( \alpha_i \) is integral,
    \[ \alpha_i^{n_i} + r_{i,1} \alpha_i^{n_i - 1} + \dots + r_{i,n_i} \alpha_i^0 = 0 \]
    Hence \( \alpha_i^{n_i} \) lies in the \( R \)-linear span of \( \qty{\alpha_i^0, \dots, \alpha_i^{n_i - 1}} \).
    Thus, every element is an \( R \)-linear combination of products of the form \( \alpha_1^{e_1} \dots \alpha_n^{e_n} \), which in turn lies in the \( R \)-linear span of products of the same form where all \( e_i \) are less than the corresponding \( n_i \).
    This is a finite set, so \( A \) is finitely generated as an \( R \)-module.

    \emph{(iii) implies (i).}
    As \( A \) is finitely generated as an \( R \)-module, it must be finitely generated as an \( R \)-algebra.
    Let \( \alpha \in A \); we show \( \alpha \) is integral over \( R \).
    Let \( \rho : R \to A \) be the structure homomorphism of \( A \) as an \( R \)-algebra.
    Then \( \rho(R) \subseteq A \), and consider \( (\rho(R))[\alpha] \subseteq A \).
    Now, \( A \) is a \( (\rho(R))[\alpha] \)-module, and is faithful because \( 1_A \in A \).
    As \( A \) is a finitely generated \( \rho(R) \)-module, the previous proposition shows that \( \alpha \) is \( \rho(R) \)-integral.
    Equivalently, \( \alpha \) is \( R \)-integral.
\end{proof}
\begin{proposition}
    Let \( A \) be an \( R \)-algebra and let \( \mathcal O \) be the set of elements of \( A \) that are integral over \( R \).
    Then \( \mathcal O \) is an \( R \)-subalgebra of \( A \).
\end{proposition}
\begin{proof}
    Let \( x, y \in \mathcal O \).
    Then \( \qty{x, y} \) is a finite set of \( R \)-integral elements, so the set generates an integral \( R \)-subalgebra of \( A \).
    Hence \( x + y, xy \) lie in this subalgebra, and so they are integral.
\end{proof}
\begin{proposition}
    Let \( A \subseteq B \subseteq C \) be rings.
    Then,
    \begin{enumerate}
        \item if \( C \) is finite over \( B \) and \( B \) is finite over \( A \), then \( C \) is finite over \( A \);
        \item if \( C \) is integral over \( B \) and \( B \) is integral over \( A \), then \( C \) is integral over \( A \).
    \end{enumerate}
\end{proposition}
\begin{proof}
    \emph{Part (i).}
    Suppose that
    \[ C = \vecspan_B\qty{\gamma_1, \dots, \gamma_n};\quad B = \vecspan_A\qty{\beta_1, \dots, \beta_\ell} \]
    Then
    \[ C = \vecspan_A\qty{\gamma_i \beta_j \mid i \leq n, j \leq \ell} \]

    \emph{Part (ii).}
    Let \( c \in C \), so \( f(c) = 0 \) for
    \[ f(T) = T^n + b_1 T^{n-1} + \dots + b_n T^0 \in B[T] \]
    Then \( f \in A'[T] \), where \( A' = A[b_1, \dots, b_n] \).
    The inclusion \( A \subseteq A' \) is generated as an \( A \)-algebra by finitely many integral elements.
    Similarly, \( A' \subseteq A'[c] \) is generated as an \( A \)-algebra by \( c \), which is integral over \( A' \) as \( f \in A'[T] \).
    By the previous result, both extensions are finite.
    Then, by part (i), \( A \subseteq A'[c] \) is finite, so \( c \) is integral over \( A \).
\end{proof}
\begin{definition}
    Let \( A \subseteq B \) be rings.
    The \emph{integral closure} of \( A \) in \( B \) is the set \( \overline A \) of elements of \( B \) that are integral over \( A \), which is an \( A \)-algebra.
    We say that \( A \) is \emph{integrally closed} in \( B \) if \( \overline A = A \).
\end{definition}
\begin{definition}
    Let \( A \) be an integral domain.
    In this case, the \emph{integral closure} of \( A \) is the integral closure of \( A \) in its field of fractions \( FF(A) \).
    We say that \( A \) is integrally closed if it is integrally closed in its field of fractions.
\end{definition}
\begin{example}
    \begin{enumerate}
        \item \( \mathbb Z\qty[\sqrt{5}] \) is not integrally closed, because \( \alpha = \frac{1 + \sqrt{5}}{2} \in FF\qty(\mathbb Z\qty[\sqrt{5}]) = \mathbb Q\qty[\sqrt{5}] \), and \( \alpha^2 - \alpha - 1 = 0 \) so it is \( \mathbb Z\qty[\sqrt{5}] \)-integral.
        \item \( \mathbb Z \) is integrally closed.
        \item If \( k \) is a field, \( k[T_1, \dots, T_n] \) are integrally closed.
    \end{enumerate}
\end{example}
Examples (ii) and (iii) are special cases of the following result.
\begin{proposition}
    Let \( A \) be a unique factorisation domain.
    Then \( A \) is integrally closed.
\end{proposition}
\begin{proof}
    Let \( x \in FF(A) \setminus A \), and write \( x = \frac{a}{b} \) with \( a \in A, b \in A \setminus \qty{0} \).
    As \( A \) is a unique factorisation domain, we can assume there is a prime \( p \) such that \( p \mid b \) and \( p \nmid a \).
    If \( x \) is integral over \( A \), then
    \[ \qty(\frac{a}{b})^n + a_1 \qty(\frac{a}{b})^{n-1} + \dots + a_n \qty(\frac{a}{b})^0 = 0 \]
    Multiplying by \( b^n \),
    \[ a^n = - b \qty(a_1 b_0 a^{n-1} + \dots + a_n b^{n-1} a^0) \]
    But as \( p \mid b \), we must have \( p \mid a^n \), so \( p \mid a \), which is a contradiction.
\end{proof}
\begin{lemma}
    Let \( A \subseteq B \) be rings, and let \( \overline A \) be the integral closure of \( A \) in \( B \).
    Then \( \overline A \) is integrally closed in \( B \). 
\end{lemma}
Taking the integral closure is an idempotent operation.
\begin{proof}
    Let \( x \in B \) be integral over \( \overline A \).
    Then, we have
    \[ A \subseteq \overline A \subseteq \overline A[x] \]
    The first extension is integral by definition, and the second is integral by the above proposition, as \( x \) is integral over \( \overline A \).
    By transitivity of integrality, \( \overline A[x] \) is integral over \( A \), so in particular, \( x \) is integral over \( A \).
    Thus \( x \in \overline A \).
\end{proof}
\begin{proposition}
    Let \( A \subseteq B \) be rings.
    \begin{enumerate}
        \item if \( B \) is integral over \( A \) and \( \mathfrak b \) is an ideal in \( B \), then \( \faktor{B}{\mathfrak b} \) is integral over \( \faktor{A}{\mathfrak b^c} \);
        \item if \( B \) is integral over \( A \) and \( S \subseteq A \) is a multiplicative set, then \( S^{-1}B \) is integral over \( S^{-1}A \);
        \item if \( \overline A \) is the integral closure of \( A \) in \( B \) and \( S \subseteq A \) is a multiplicative set, then \( S^{-1} \overline A \) is the integral closure of \( S^{-1} A \) in \( S^{-1} B \), so \( \overline{S^{-1}A} = S^{-1}\overline A \).
    \end{enumerate}
\end{proposition}
The proofs follow directly from the definitions.
\begin{lemma}
    Let \( A \subseteq B \) be an integral extension of rings.
    Then
    \begin{enumerate}
        \item \( A \cap B^\times = A^\times \);
        \item if \( A, B \) are integral domains, then \( A \) is a field if and only if \( B \) is a field.
    \end{enumerate}
\end{lemma}
\begin{proof}
    \emph{Part (i).}
    One inclusion is clear: \( A^\times \subseteq A \cap B^\times \).
    Suppose \( a \in A \) and \( a \) is a unit in \( B \) with inverse \( b \in B \); we show that \( b \in A \).
    As \( b \) is integral over \( A \),
    \[ b^n + a_1 b^{n-1} + \dots + a_n b^0 = 0;\quad a_i \in A \]
    Multiplying by \( a^{n-1} \),
    \[ b + \underbrace{a_1 + a_2 a^1 + \dots + a_n a^{n-1}}_{\in A} = 0 \]
    Hence \( b \) must lie in \( A \).

    \emph{Part (ii).}
    Suppose \( B \) is a field.
    Then
    \[ A^\times = A \cap (B \setminus \qty{0}) = A \setminus \qty{0} \]
    Hence \( A \) is a field.
    Conversely, suppose \( A \) is a field.
    Let \( b \in B \) be a nonzero element; we want to show that \( b \) is a unit in \( B \).
    As \( b \) is integral over \( A \),
    \[ b^n + a_1 b^{n-1} + \dots + a_n b^0 = 0;\quad a_i \in A \]
    Let \( n \) be minimal with this property.
    Then
    \[ b\underbrace{\qty(b^{n-1} + a_1 b^{n-2} + \dots + a_{n-1} b^0)}_{\Delta} = -a_n \]
    Note that \( b \neq 0 \) by assumption, and \( \Delta \neq 0 \) by minimality.
    As \( B \) is an integral domain, \( a_n \neq 0 \).
    Because \( A \) is a field, \( a_n \) is invertible.
    Thus
    \[ b(-a_n^{-1} \Delta) = 1 \implies b \in B^\times \]
\end{proof}
\begin{corollary}
    Let \( A \subseteq B \) be an integral extension of rings, and let \( \mathfrak q \) be a prime ideal in \( B \).
    Then \( \mathfrak q \) is a maximal ideal of \( B \) if and only if it \( \mathfrak q^c = \mathfrak q \cap A \) is a maximal ideal in \( A \).
\end{corollary}
\begin{proof}
    We have an embedding of rings
    \[ \faktor{A}{\mathfrak q \cap A} \rightarrowtail \faktor{B}{\mathfrak q} \]
    which is an integral extension of integral domains.
    By the previous result, one is a field if and only if the other is, so \( \mathfrak q \cap A \) is maximal in \( A \) if and only if \( \mathfrak q \) is maximal in \( B \).
\end{proof}
