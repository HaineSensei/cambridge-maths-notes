\subsection{Languages}
Recall that a \emph{group} is a set \( A \) equipped with functions \( m \colon A^2 \to A \) of arity 2, and \( i \colon A^1 \to A \) of arity 1, and a constant \( e \in A \) which can be viewed as a function \( A^0 \to A \) of arity 0, such that a set of axioms hold.
A \emph{poset} is a set \( A \) equipped with a relation \( (\leq) \subseteq A^2 \) of arity 2, such that a set of axioms hold.
Other algebraic structures can be described in the same way.

Let \( \Omega \) and \( \Pi \) be disjoint sets of functions and relations, and \( \alpha \colon \Omega \cup \Pi \to \mathbb N \) be an arity function.
\emph{Variables} are symbols of the form \( x_i \) for some \( i \in \mathbb N \).
\emph{Terms} are defined inductively by
\begin{enumerate}
    \item each variable is a term;
    \item if \( f \in \Omega \) with \( \alpha(f) = n \) and terms \( t_1, \dots, t_n \), then \( f\ t_1\dots\ t_n \) is a term.
\end{enumerate}
The \emph{atomic formulae} are defined inductively by
\begin{enumerate}
    \item \( \bot \) is an atomic formula;
    \item for terms \( s, t \), \( (s = t) \) is an atomic formula;
    \item if \( \varphi \in \Pi \) with \( \alpha(\varphi) = n \) and terms \( t_1, \dots, t_n \), then \( \varphi(t_1, \dots, t_n) \) is an atomic formula.
\end{enumerate}
The \emph{formulae} are defined inductively by
\begin{enumerate}
    \item each atomic formula is a formula;
    \item if \( p \) and \( q \) are formulae then \( (p \Rightarrow q) \) is a formula;
    \item if \( p \) is a formula and \( x \) is a variable, then \( (\forall x) p \) is a formula.
\end{enumerate}
The \emph{language} \( L = L(\Omega, \Pi, \alpha) \) is the set of formulae.
\begin{example}
    In the language of groups, \( \Omega = \qty{m, i, e} \) and \( \Pi = \varnothing \) with \( \alpha(m) = 2, \alpha(i) = 1, \alpha(e) = 0 \).
    \( m(x_1, x_2), m(x_1, i(x_2)), e, m(e, e) \) are examples of terms of the language.
    \( e = m(\ell, e), m(x,y) = m(y,x) \) are atomic formulae.
\end{example}
\begin{example}
    In the language of posets, \( \Omega = \varnothing \) and \( \Pi = \qty{\leq} \) with \( \alpha(\leq) = 2 \).
    \( x = y, x \leq y \) are atomic formulae.
    Technically, \( x \leq y \) is written \( \leq(x, y) \).
\end{example}
\begin{example}
    In the language of groups, \( (\forall x) (m(x,x) = e) \) is a formula.
    Another formula is \( m(x,x) = e \Rightarrow (\exists y) (m(y,y) = x) \).
\end{example}
\begin{remark}
    A formula is a certain finite string of symbols; it has no intrinsic semantics.
    We define \( \neg p, p \wedge q, p \vee q \) in the usual way.
    We define \( (\exists x) p \) to mean \( \neg(\forall x) (\neg p) \).
\end{remark}
A term is \emph{closed} if it contains no variables.
For example, \( e, m(e,i(e)) \) are closed in the language of groups, but \( m(x,i(x)) \) is not closed.

An occurrence of a variable \( x \) in a formula \( p \) is \emph{bound} if it is inside the brackets of a \( (\forall x) \) quantifier.
Otherwise, we say the occurrence is \emph{free}.
In the formula \( (\forall x)(m(x,x) = e) \), each occurrence of \( x \) is bound.
In \( m(x,x) = e \Rightarrow (\exists y)(m(y,y) = x) \), the occurrences of \( x \) are free and the occurrences of \( y \) are bound.
In the formula \( m(x,x) = e \Rightarrow (\forall x)(\forall y)(m(x,y) = m(y,x)) \), the occurrences of \( x \) on the left hand side are free, and the occurrences of \( x \) on the right hand side are bound.

A \emph{sentence} is a formula with no free variables.
\( (\forall x)(m(x,x) = e) \) is a sentence, and \( (\forall x)(m(x,x) \Rightarrow (\exists y)(m(y,y) = x)) \) is a sentence.
In the language of posets, \( (\forall x)(\exists y)(x \geq y \wedge \neg(x = y)) \) is a sentence.

For a formula \( p \), term \( t \), and variable \( x \), the \emph{substitution} \( p[t/x] \) is obtained from \( p \) by replacing every free occurrence of \( x \) with \( t \).
If \( p = (\exists y)(m(y,y) = x) \), \( p[e/x] = (\exists y)(m(y,y) = e) \).

\subsection{Semantic implication}
\begin{definition}
    Let \( L = L(\Omega, \Pi, \alpha) \) be a language.
    An \emph{\( L \)-structure} is
    \begin{itemize}
        \item a nonempty set \( A \);
        \item for each \( f \in \Omega \), a function \( f_A \colon A^n \to A \) where \( n = \alpha(f) \);
        \item for each \( \varphi \in \Pi \), a subset \( \varphi_A \subseteq A^n \) where \( n = \alpha(\varphi) \).
    \end{itemize}
\end{definition}
\begin{remark}
    We will see later why the restriction that \( A \) is nonempty is given here.
\end{remark}
\begin{example}
    In the language of groups, an \( L \)-structure is a nonempty set \( A \) with functions \( m_A \colon A^2 \to A, i_A \colon A \to A, e_A \in A \).
    Such a structure may not be a group, as we have not placed any axioms on \( A \).
\end{example}
\begin{example}
    In the language of posets, an \( L \)-structure is a nonempty set \( A \) with a relation \( (\leq_A) \subseteq A^2 \).
\end{example}
We define the \emph{interpretation} \( p_A \in \qty{0,1} \) of a sentence \( p \) in an \( L \)-structure \( A \) as follows.
\begin{itemize}
    \item The interpretation \( t_A \) of a closed term \( t \) in an \( L \)-structure \( A \) is defined inductively as \( (f\ t_1\dots t_n)_A = f_A({t_1}_A, \dots, {t_n}_A) \) for \( f \in \Omega, \alpha(f) = n \), where \( t_1, \dots, t_n \) are closed.
    \item The interpretation of an atomic sentence is defined inductively.
    \begin{itemize}
            \item \( \bot_A = 0 \).
        \item \( (s = t)_A \) is 1 if \( s_A = t_A \) and 0 if \( s_A \neq t_A \).
        \item \( (\varphi(t_1, \dots, t_n))_A \) is 1 if \( ({t_1}_A, \dots, {t_n}_A) \in \varphi_A \) and 0 otherwise, for \( \varphi \in \Pi, \alpha(\varphi) = n \), where \( t_1, \dots, t_n \) are closed.
    \end{itemize}
    \item We now inductively define the interpretation of sentences, which is technically induction by length over all languages at once.
    \begin{itemize}
        \item \( (p \Rightarrow q)_A \) is 0 if \( p_A = 1 \) and \( q_A = 0 \), and 1 otherwise.
        \item \( ((\forall x)p)_A \) is 1 if \( p[\overline a/x] \) is 1 for all \( a \in A \) and 0 otherwise, where we add a constant symbol \( \overline a \) to \( L \) for a fixed \( a \in A \) to form the language \( L' \), and we make \( A \) into an \( L' \)-structure by defining \( \overline a_A = a \).
    \end{itemize}
\end{itemize}
\begin{remark}
    For a formula \( p \) with free variables, we can define \( p_A \) to be the subset of \( A^k \) where \( k \) is the number of free variables, defined such that \( x \in p_A \) if and only if the substitution of \( x \) in \( p \) is evaluated to 1.
\end{remark}
\begin{definition}
    If \( p_A = 1 \), we say \( p \) \emph{holds} in \( A \), or \( p \) is \emph{true} in \( A \), or \( A \) is a \emph{model} of \( p \).
    A \emph{theory} is a set of sentences, known as its \emph{axioms}.
    We say that \( A \) is a \emph{model} of a theory \( T \) if \( p_A = 1 \) for all \( p \in T \).
    For a theory \( T \) and a sentence \( p \), we say that \( T \models p \), read \( T \) \emph{entails} or \emph{semantically implies} \( p \), if every model of \( T \) is a model of \( p \).        
\end{definition}
\begin{example}
    Let \( L \) be the language of groups, and let
    \begin{align*}
        T &= \{(\forall x)(\forall y)(\forall z)m(x,m(y,z)) = m(m(x,y), z), \\
        &(\forall x)(m(x,e) = x \wedge m(e,x) = x), \\
        &(\forall x)(m(x,i(x)) = e \wedge m(i(x),x) = e)\}
    \end{align*}
    Then, an \( L \)-structure is a model of \( T \) if and only if it is a group.
    Note that this statement has two assertions; every \( L \)-structure that is a model of \( T \) is a group, and that every group can be turned into an \( L \)-structure that models \( T \).
    We say that \( T \) \emph{axiomatises} the theory of groups or the class of groups.
\end{example}
\begin{example}
    Let \( L \) be the language of posets, and \( T \) be the poset axioms.
    Then \( T \) axiomatises the class of posets.
\end{example}
\begin{example}
    Let \( L \) be the language of fields, so \( \Omega = \qty{0, 1, +, \cdot, -} \) with \( \alpha(0) = \alpha(1) = 0, \alpha(+) = \alpha(\cdot) = \alpha(-) = 2 \).
    \( T \) is the usual field axioms, including the statement \( (\forall x)(\neg (x = 0) \Rightarrow (\exists y)(x \cdot y = 1)) \).
    Then \( T \) entails the statement that inverses are unique: \( (\forall x)(\neg (x = 0) \Rightarrow (\forall y)(\forall z) (y \cdot x = 1 \wedge z \cdot x = 1 \Rightarrow y = z)) \).
\end{example}
\begin{example}
    Let \( L \) be the language of graphs, defined by \( \Omega = \varnothing \) and \( \Pi = \qty{a} \) where \( \alpha(a) = 2 \) is the adjacency relation.
    Define \( T = \qty{(\forall x)(\neg a(x,x)), (\forall x)(\forall y)(a(x,y) \Rightarrow a(y,x))} \).
    Then \( T \) axiomatises the class of graphs.
\end{example}

\subsection{Syntactic implication}
We need to define (logical) axioms and deduction rules in order to construct proofs.
\begin{enumerate}
    \item \( p \Rightarrow (q \Rightarrow p) \) for formulae \( p, q \).
    \item \( (p \Rightarrow (q \Rightarrow r)) \Rightarrow ((p \Rightarrow q) \Rightarrow (q \Rightarrow r)) \) for formulae \( p, q, r \).
    \item \( \neg\neg p \Rightarrow p \) for each formula \( p \).
    \item \( (\forall x)(x = x) \) for any variable \( x \).
    \item \( (\forall x)(\forall y)(x = y \Rightarrow (p \Rightarrow p[y/x])) \) for any variables \( x, y \) where \( y \) is not bound in the formula \( p \).
    \item \( ((\forall x)p) \Rightarrow p[t/x] \) for any variable \( x \), formula \( p \), and term \( t \) that has no free variable that occurs bound in \( p \).
    \item \( (\forall x)(p \Rightarrow q) \Rightarrow (p \Rightarrow (\forall x)q) \) for any formulae \( p, q \) and variable \( x \) that does not appear free in \( p \).
\end{enumerate}
Note that all of these axioms are tautologies; they hold in every structure.
We define the following deduction rules.
\begin{enumerate}
    \item (modus ponens) From \( p \) and \( p \Rightarrow q \), we can deduce \( q \).
    \item (generalisation) From \( p \), we can deduce \( (\forall x)p \) provided that \( x \) does not occur free in any premise used to deduce \( p \).
\end{enumerate}
For \( S \subseteq L \) and \( t \in L \), we say that \( S \vdash p \), read \( S \) \emph{proves} \( p \), if there exists a \emph{proof} of \( p \) from \( S \), which is a finite sequence of formulae ending with \( p \) such that each formula is a logical axiom, a hypothesis in \( S \), or obtained from earlier lines by one of the deduction rules.
\begin{remark}
    Suppose we allow the empty structure for a language with no constants.
    Then, \( \bot \) is false in \( A \), and the statement \( (\forall x)\bot \) is true in \( A \).
    Therefore, \( ((\forall x)\bot) \Rightarrow \bot \) is false by modus ponens.
    But this is an instance of axiom (vi), showing that it would not be a tautology.
\end{remark}
\begin{example}
    We show \( \qty{x = y, x = z} \vdash y = z \) where \( x, y, z \) are different variables.
    \begin{enumerate}[1.]
        \item \( (\forall x)(\forall y)(x = y \Rightarrow (x = z \Rightarrow y = z)) \) (axiom 5)
        \item \( \qty((\forall x)(\forall y)(x = y \Rightarrow (x = z \Rightarrow y = z))) \Rightarrow (\forall y)(x = y \Rightarrow (x = z \Rightarrow y = z)) \) (axiom 6)
        \item \( (\forall y)(x = y \Rightarrow (x = z \Rightarrow y = z)) \) (modus ponens on lines 1, 2)
        \item \( \qty((\forall y)(x = y \Rightarrow (x = z \Rightarrow y = z))) \Rightarrow (x = y \Rightarrow (x = z \Rightarrow y = z)) \) (axiom 6)
        \item \( x = y \Rightarrow (x = z \Rightarrow y = z) \) (modus ponens on lines 3, 4)
        \item \( x = y \) (hypothesis)
        \item \( x = z \Rightarrow y = z \) (modus ponens on lines 5, 6)
        \item \( x = z \) (hypothesis)
        \item \( y = z \) (modus ponens on lines 7, 8)
    \end{enumerate}
\end{example}

\subsection{Deduction theorem}
\begin{proposition}
    Let \( S \subseteq L \), and \( p, q \in L \).
    Then \( S \vdash (p \Rightarrow q) \) if and only if \( S \cup \qty{p} \vdash q \).    
\end{proposition}
\begin{proof}
    As before, given a proof of \( p \Rightarrow q \) from \( S \), one can establish a proof of \( q \) from \( S \cup \qty{p} \vdash q \) by writing \( p \) and applying modus ponens to the original proof.

    Conversely, suppose we have a proof \( S \cup \qty{p} \vdash q \).
    We convert each line \( t_i \) into \( p \Rightarrow t_i \) as in the proof in propositional logic.
    The only new case is generalisation.
    Suppose we have the line \( r \) and then the line \( (\forall x) r \) obtained by generalisation, and we have a proof \( S \vdash p \Rightarrow r \) by induction.
    In the proof \( S \cup \qty{p} \vdash r \), no hypothesis has a free occurrence of \( x \).
    Therefore, in the proof \( S \vdash p \Rightarrow r \), the same holds.
    Thus, \( S \vdash (\forall x)(p \Rightarrow r) \) by generalisation.

    Suppose \( x \) is not free in \( p \).
    Then, \( S \vdash p \Rightarrow (\forall x)r \) by axiom 7 and modus ponens.

    Now, suppse \( x \) occurs free in \( p \).
    In this case, the proof \( S \cup \qty{p} \vdash r \) cannot have used the hypothesis \( p \).
    Hence, \( S \vdash r \), and so \( S \vdash (\forall x)r \) by generalisation.
    This gives \( S \vdash p \Rightarrow (\forall x)r \) by axiom 1.
\end{proof}

\subsection{Soundness}
This section is non-examinable.
\begin{proposition}
    Let \( S \) be a set of sentences in \( L \), and \( p \) a sentence in \( L \).
    Then \( S \vdash t \) implies \( S \models t \).
\end{proposition}
\begin{proof}
    We have a proof \( t_1, \dots, t_n \) of \( p \) from \( S \).
    We show that if \( A \) is a model of \( S \), \( A \) is also a model of \( t_i \) for each \( i \) (interpreting free variables as quantified); this can be shown by induction.
    Hence, \( S \models p \).
\end{proof}

\subsection{Adequacy}
This section is non-examinable.

We want to show that \( S \models p \) implies \( S \vdash p \).
Equivalently, \( S \cup \qty{\neg p} \models \bot \) implies \( S \cup \qty{\neg p} \vdash \bot \).
In other words, if \( S \cup \qty{\neg p} \) is consistent, it has a model.
\begin{theorem}[model existence lemma]
    Every consistent theory has a model.
\end{theorem}
We will need a number of key ideas in order to prove this.
\begin{enumerate}
    \item We will construct our model out of the language itself using the closed terms of \( L \).
    For instance, if \( L \) is the language of fields and \( S \) is the usual field axioms, we take the closed terms and combine them with \( + \) and \( \cdot \) in the obvious way.
    \item However, we can prove \( S \vdash 1 + 0 = 1 \), but \( 1 + 0 \) and \( 1 \) are distinct as strings.
    We will therefore take the quotient of this set by the equivalence relation defined by \( s \sim t \) if \( S \vdash s = t \).
    If this set is \( A \), we define \( [s] +_A [t] = [s + t] \), and this is a well-defined operation.
    \item Suppose \( S \) is the set of field axioms with the statement that \( 1 + 1 = 0 \vee 1 + 1 + 1 = 0 \).
    In this theory, \( S \not\vdash 1 + 1 = 0 \) and \( S \not\vdash 1 + 1 + 1 = 0 \).
    Therefore, \( [1+1] \neq [0] \) and \( [1+1+1] \neq [0] \), so our structure \( A \) is not of characteristic 2 or 3.
    We can overcome this by first extending \( S \) to a maximal consistent theory.
    \item Suppose \( S \) is the set of field axioms with the statement that \( (\exists x)(x \cdot x = 1 + 1) \).
    There is no closed term \( t \) with the property that \( [t\cdot t] = [1+1] \).
    The problem is that \( S \) lacks \emph{witnesses} to existential quantifiers.
    For each statement of the form \( (\exists x)p \in S \), we add a new constant \( c \) to the language and add to \( S \) the sentence \( p[c/x] \).
    This still forms a consistent set.
    \item The resulting set may no longer be maximal, as we have extended our language with new constants.
    We must then return to step (iii) then step (iv); it is not clear if this process ever terminates.
\end{enumerate}
