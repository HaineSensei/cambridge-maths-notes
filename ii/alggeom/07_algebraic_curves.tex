\subsection{Curves}
\begin{definition}
    A \emph{curve} is a variety of dimension 1.
\end{definition}
For our purposes, a curve is taken to mean a smooth irreducible projective variety of dimension 1.
By convention, a curve \( C \) implicitly has an expression as \( \mathbb V(I) \subseteq \mathbb P^n \), but this ambient space will not play an important role.
\begin{example}
    Let \( f_d \in \mathbb C[X, Y, Z] \) be homogeneous of degree \( d \).
    For almost all choices of coefficients, \( \mathbb V(f_d) \) is a (smooth irreducible projective) curve.
    We will show that for \( d, d' \geq 2 \), \( \mathbb V(f_d) \) and \( \mathbb V(f_{d'}) \) are never isomorphic.
\end{example}
\begin{proposition}
    Let \( C \) be a curve, and let \( D \subsetneq C \) be a proper Zariski closed subset.
    Then \( D \) is a finite union of points.
\end{proposition}
\begin{proof}
    It suffices to prove this for irreducible affine curves \( V \subseteq \mathbb A^n \).
    Let \( W \subsetneq V \) be a proper irreducible closed subset; we will show this is a single point.
    By the Nullstellensatz, there is a strict containment \( I(V) \subsetneq I(W) \).

    If \( t \in \mathbb C[W] \setminus \mathbb C \), we can use this to produce an element \( y \in \mathbb C[V] \) as follows.
    \( \varphi \colon W \hookrightarrow V \) gives the pullback map \( \varphi^\star \colon C[V] \to C[W] \) which is a surjection.
    Take any \( y \) such that \( \varphi^\star(y) = t \).

    We can also take \( x \in \mathbb C[V] \) such that \( \varphi^\star(x) = 0 \), so \( x \not\in \mathbb C \).
    One can show that \( x, y \) are algebraically independent in \( \mathbb C(V) \), as \( t \) is transcendental.
    This gives two algebraically independent elements of \( C(V) \), which has transcendence degree 1.
    So no such \( t \) can exist, so \( \mathbb C[W] = \mathbb C \).
    Therefore \( W \) is a point.
\end{proof}
Recall that if \( V \) is an irreducible variety, it has a coordinate ring (if it is affine), a function field, a local ring at each point, and the maximal ideal of functions vanishing at the given point in the local ring.
These can be specialised in the case of curves.
Note that if \( C \) is a smooth irreducible projective curve, there exists \( t \in \mathbb C(V) \) such that \( \faktor{\mathbb C(V)}{\mathbb C(t)} \) is finite.
\begin{theorem}
    Let \( P \) be a smooth point of an irreducible curve \( V \).
    Then, the ideal \( \mathfrak m_P \trianglelefteq \mathcal O_{V,P} \) is principal.
\end{theorem}
A generator \( \pi_P \) of \( \mathfrak m_P \) is called a \emph{local parameter}, a \emph{coordinate}, or a \emph{uniformiser}.
\begin{proof}
    We assume \( P \) lies in the affine patch \( V_0 \) of \( V \).
    By changing coordinates, we can set \( P = 0 \in \mathbb A^n \).
    \begin{align*}
        \mathbb C[V_0] &= \faktor{\mathbb C[X_1, \dots, X_n]}{I(V_0)} = \mathbb C[x_1, \dots, x_n];\\
        \mathcal O_P &= \mathcal O_{V_0,P} = \qty{\frac{f}{g} \mid f, g \in \mathbb C[V_0], g \not\in (x_1, \dots, x_n)}\\
        \mathfrak m_P &= \qty{\frac{f}{g} \mid f \in (x_1, \dots, x_n), g \not\in (x_1, \dots, x_n)} = x_1 \mathcal O_P + \dots + x_n \mathcal O_P \subseteq \mathcal O_P
    \end{align*}
    where \( x_i \) is the image of \( X_i \) under the quotient map.
    More generally, if \( J \trianglelefteq \mathcal O_P \) is any ideal, \( \frac{f}{g} \in J \) if and only if \( f \in J \).
    Therefore,
    \[ J = \qty{\frac{f}{g} \mid f \in J \cap \mathbb C[V_0], g \in \mathbb C[V_0], g(P) \neq 0} \]
    In particular, \( J \) is finitely generated.

    Since \( P \) is smooth, \( T_{V_0,P}^{\text{aff}} \) is a line, and by changing coordinates, \( T_{V,P} = \qty{X_2 = X_3 = \dots = X_n = 0} \).
    We claim that \( x_1 \) generates \( \mathfrak m_P \).
    Since \( T_{V,P} \) is cut out by linearisations at \( P = 0 \) of elements in \( I(V_0) \), there exist functions \( f_2, \dots, f_n \in I(V_0) \) such that \( f_j = X_j - h_j \) where \( h_j \) has no terms of degree less than 2.
    In \( \mathcal O_P \),
    \[ x_j = h_j(x_1, \dots, x_n) \in (x_1^2, x_1 x_2, \dots, x_n^2) = \mathfrak m_P^2 \]
    Thus, \( \mathfrak m_P = \sum_{j=1}^n x_i \mathcal O_P = x_1 \mathcal O_P + \mathfrak m_P^2 \).
    The result that \( \mathfrak m_P \) is generated by \( x_1 \) follows from Nakayama's lemma.
    \begin{lemma}[Nakayama]
        Let \( R \) be a ring, let \( M \) be a finitely generated \( R \)-module, and let \( J \trianglelefteq R \) be an ideal.
        Then,
        \begin{enumerate}
            \item if \( JM = M \), there exists \( r \in J \) such that \( (1+r)M = 0 \); and
            \item if \( N \leq M \) is a submodule such that \( JM + N = M \), then there exists \( r \in J \) such that \( (1+r)M \subseteq N \).
        \end{enumerate}
    \end{lemma}
    % proof in notes, not examinable or important
    % acts like the inverse/implicit function theorem
    Let
    \[ R = \mathcal O_L \supseteq J = \mathfrak m_P = M \supseteq N = (x_1) \]
    and apply part (ii) of Nakayama's lemma to conclude.
\end{proof}
\begin{corollary}
    Let \( V = \mathbb V(f) \subseteq \mathbb A^2 \) be an irreducible affine curve.
    Then, if \( P \in V \) is a smooth point, the function \( V \to \mathbb C \) defined by \( Q \mapsto X(Q) - X(P) \) is a local parameter if and only if \( \pdv{f}{Y}\qty(P) \neq 0 \).
\end{corollary}
\begin{proof}
    Use the proof of the above theorem.
\end{proof}
\begin{corollary}
    Let \( P \) be a smooth point of a curve \( V \).
    Then there exists a surjective group homomorphism \( \nu_P \colon \mathbb C(V)^\star \to \mathbb Z \) called the \emph{valuation} at \( P \) or \emph{order of vanishing} at \( P \), such that
    \begin{enumerate}
        \item \( \mathcal O_{V,P}  = \qty{0} \cup \qty{f \in \mathbb C(V)^\star \mid \nu_P(f) \geq 0} \);
        \item \( \mathfrak m_p = \qty{0} \cup \qty{f \in \mathbb C(V)^\star \mid \nu_P(f) > 0} \);
        \item if \( f \in \mathbb C(V)^\star \), then for any local parameter \( \pi_P \), we can write \( f = \pi_P^{\nu_P(f)} u \) where \( u \in \mathcal O_{V,P}^\star = O_{V,P} \setminus \mathfrak m_P \).
    \end{enumerate}
\end{corollary}
We will `filter' the ring \( \mathcal O_{V,P} \) by ideals generated generated by powers \( \pi_P^k \) for \( k \geq 0 \).
\begin{proof}
    We know that \( \mathfrak m_P = (\pi_P) \), so \( \mathfrak m_P^n = (\pi_P^n) \).
    Define \( J = \bigcap_{n \geq 0} \mathfrak m_P^n \).
    Note that \( J \trianglelefteq \mathcal O_{V,P} \) is a finitely generated ideal as we have seen in the previous proof, and moreover, \( \mathfrak m_P J = \pi_P J = J \).
    By part (i) of Nakayama's lemma, it follows that \( J = 0 \).
    So only the zero function vanishes to infinite order.

    For every \( f \in \mathcal O_{V,P} \setminus \qty{0} \), there exists a unique \( n \) such that \( f \in \mathfrak m_P^n \setminus \mathfrak m_P^{n+1} \).
    Define \( \nu_P(f) = n \) for this \( n \).
    If \( f \in \mathbb C(V) \setminus \mathcal O_{V,P} \setminus \qty{0} \), we claim \( f^{-1} \in \mathcal O_{V,P} \).
    Indeed, \( f = \frac{g}{h} \) for \( g, h \in \mathcal O_{V,P} \), so we can write \( g = \pi_P^k u \) and \( h = \pi_P^\ell u' \) where \( k, l \geq 0 \) and \( u, u' \in \mathcal O_{V,P}^\star \).
    Since \( f \not\in \mathcal O_{V,P} \), it follows that \( k < \ell \), so \( f^{-1} \in \mathcal O_{V,P} \) as required.
    Given this, we can define \( \nu_P(f) = -\nu_P(f^{-1}) \) for such \( f \).

    As \( \mathfrak m_P \) is a local ring, \( \mathcal O_{V,P} \setminus \mathfrak m_P = \mathcal O_{V,P}^\star \), so every nonzero \( f \in \mathbb C(V) \) is \( \pi_P^{\nu_P(f)} u \) where \( u \in \mathcal O_{V,P}^\star \), giving \( \nu_P \) as desired.
\end{proof}
\begin{example}
    Let \( V = \mathbb A^1 \) and \( P = 0 \in \mathbb A^1 \).
    Then \( \mathcal O_{\mathbb A^1,0} = \qty{\frac{f(t)}{g(t)} \mid g(0) \neq 0} \), and \( \mathfrak m_0 = \qty{\frac{f(t)}{g(t)} \mid f(0) = 0, g(0) \neq 0} \).
    So \( \mathfrak m_0 \) is the set of \( \frac{f(t)}{g(t)} \) where \( t \mid f \).
    Then \( \mathfrak m_0^k \) is the set of \( \frac{f(t)}{g(t)} \) where \( t^k \mid f \).

    We can think of \( \frac{f(t)}{g(t)} \) where \( g(t) = a_0 + a_1t + \dots + a_k t^k \) as \( f(t) \) multiplied by the power series expansion of \( g(t)^{-1} \) which has nonzero constant term.
    This product can be written as \( t^M \) multiplied by another power series with nonzero constant term.
    The valuation of \( f \) is \( \nu_0\qty(\frac{f}{g}) = M \).
\end{example}
\begin{corollary}
    Let \( V \) be an irreducible curve and \( f \in \mathbb C(V) \).
    If \( P \) is a smooth point, \( f \) or \( f^{-1} \) is regular at \( P \).
\end{corollary}
\begin{proof}
    \( f \) is regular at \( P \) if and only if \( f \in \mathcal O_{V,P} \).
    The statement then follows by checking the sign of \( \nu_P(f) \).
\end{proof}
\begin{corollary}
    Let \( V \) be a smooth curve.
    Then any rational map \( V \dashrightarrow \mathbb P^m \) is a morphism.
\end{corollary}
\begin{proof}
    Reordering coordinates, we can assume the image of \( \varphi \colon V \dashrightarrow \mathbb P^m \) is not contained in \( \qty{X_0 = 0} \).
    We write \( \varphi = (G_0, \dots, G_m) = (1 : g_1 : \dots : g_m) \) where \( g_j = \frac{G_J}{G_0} \in \mathbb C(V) \).
    If all \( g_j \in \mathcal O_{V,P} \), the result holds.
    Otherwise, let \( t = \min_j \qty{\nu_P(g_j)} \), so \( t < 0 \).
    Note that \( \min_j \qty{\nu_P(\pi_P^{-t} g_j)} = 0 \).
    Then \( \varphi \sim (\pi_P^{-t} : \pi_P^{-t} g_1 : \dots : \pi_P^{-t} g_m) \) which is regular at \( P \).
\end{proof}
Since every rational map is contained in \( \mathbb P^m \), any rational map from a curve to a projective variety is a morphism.

\subsection{Maps between curves}
\begin{example}
    Let \( C_d \subseteq \mathbb P^2 \) be a smooth plane curve of degree \( d \), so \( C_d = \mathbb V(f) \) where \( f \) is homogeneous of degree \( d \).
    Let \( P \in \mathbb P^2 \).
    Then, the projection from \( P \), which is a rational map \( \mathbb P^2 \dashrightarrow \mathbb P^1 \), automatically restricts to a morphism \( C_d \to \mathbb P^1 \).
    This morphism is surjective, and most points in \( \mathbb P^1 \) have a fibre of size \( d \).
\end{example}
\begin{proposition}
    Let \( \varphi \colon V \to W \) be a non-constant morphism of irreducible (possibly singular) projective curves.
    Then, for all \( Q \in W \), the fibre \( \varphi^{-1}(Q) \) is finite.
    The map \( \varphi \) induces an inclusion \( \varphi^\star \colon \mathbb C(W) \hookrightarrow \mathbb C(V) \) which makes \( \mathbb C(V) \) a finite extension of \( \mathbb C(W) \).
\end{proposition}
\begin{proof}
    For the first statement, \( \varphi^{-1}(Q) \) is Zariski closed in \( V \), so is either \( V \) or a finite set of points.
    As \( \varphi \) is not constant, the fibre a finite set of points.
    \( V \) is infinite, so by the first part, \( \varphi(V) \) is infinite and therefore dense in \( W \).
    Since \( \varphi \) is dominant, \( \varphi^\star \) is defined.
    The map is automatically injective.
    Let \( t \in \mathbb C(W) \setminus \mathbb C \) with \( \varphi^\star(t) = x \).
    Since \( \mathbb C(V) \) has transcendence degree 1 over \( \mathbb C \), \( \mathbb C(V) \) is finite over \( \mathbb C(x) \), so also over \( \mathbb C(W) \).
\end{proof}
\begin{definition}
    Let \( \varphi \colon V \to W \) be a non-constant morphism of curves.
    The \emph{degree} of \( \varphi \) is the degree of the field extension \( \mathbb C(V)/\varphi^\star\mathbb C(W) \).
\end{definition}
\begin{definition}
    Let \( \varphi \colon V \to W \) be a non-constant morphism of curves, let \( P \in V \) be a smooth point, and define \( Q = \varphi(P) \).
    We define the \emph{ramification degree} of \( \varphi \) at \( P \) by \( e_P = e(\varphi, P) = \nu_P(\varphi^\star \pi_Q) \), where \( \pi_Q \) is a local coordinate at \( Q \).
\end{definition}
\begin{example}
    Consider the morphism \( \varphi \colon \mathbb A^1 \to \mathbb A^1 \) defined by \( z \mapsto z^d \) for some \( d \geq 1 \).
    On rings, this is given by \( \varphi^\star \colon \mathbb C[Y] \to \mathbb C[X] \) with \( \varphi^\star(Y) = X^d \).
    On function fields, this map satisfies \( \varphi^\star \mathbb C(Y) = \mathbb C(X^d) \), a subfield of \( \mathbb C(X) \).
    The degree of \( \varphi \) is \( d \).
    Let \( P = 0 \in \mathbb A^1 \), so \( Q = 0 \in \mathbb A^1 \).
    A local parameter near \( Q \) is \( Y \), and \( \varphi^\star(Y) = X^d \).
    \( \nu_0(X^d) = d \), so the ramification degree of \( \varphi \) at \( 0 \) is \( d \).

    Now suppose \( P = 1 \), \( \varphi(P) = Q = 1 \).
    The local coordinate at \( Q \) is \( Y - 1 \).
    We can find \( \nu_P(\varphi^\star(Y - 1)) = 1 \), so the ramification degree of \( \varphi \) at 1 is 1.
    Note that \( \varphi^{-1}(1) \) is the set of \( d \)th roots of unity, which is a set of \( d \) points \( R_1, \dots, R_d \).
    \( \nu_{R_i}(\varphi^\star(Y - 1)) = 1\) for each \( i \).
\end{example}
\begin{theorem}
    Let \( \varphi \colon V \to W \) be a non-constant morphism of irreducible projective curves.
    \begin{enumerate}
        \item \( \varphi \) is surjective.
        \item Suppose \( V, W \) are smooth.
        Then, for any \( Q \in W \), \( \deg \varphi = \sum_{P \in \varphi^{-1}(Q)}e_P \).
        \item At all but finitely many points \( P \in V \), \( e_P = 1 \).
    \end{enumerate}
\end{theorem}
\begin{definition}
    A \emph{quasi-projective variety} \( U \) is a Zariski-open subset of a projective variety \( V \subseteq \mathbb P^n \).
\end{definition}
\begin{example}
    All projective varieties are quasi-projective.
    All affine varieties are also quasi-projective.
    Products of affine and projective varieties are quasi-projective, such as \( \mathbb P^n \times \mathbb A^m \).
    Note that rational functions, rational maps, morphisms, irreducibility, function fields, local rings, and other algebraic geometric concepts are defined for quasi-projective varieties in the same way.
\end{example}
\begin{proposition}[fundamental theorem of elimination theory]
    The projection map \( \mathbb P^n \times \mathbb A^m \to \mathbb A^m \) is a Zariski closed map.
\end{proposition}
Preimages and images of closed sets are closed under this map.
\begin{remark}
    Consider the map \( \pi \colon \mathbb A^2 \to \mathbb A^1 \) given by projection onto the \( x \)-axis.
    Observe that \( \pi \) is not a closed map, as \( \mathbb V(XY - 1) \) has image \( \mathbb A^1 \setminus \qty{0} \), which is not closed.
\end{remark}
Given this proposition, we prove the following result.
\begin{proposition}
    Let \( \varphi \colon V \to W \) be a morphism of quasi-projective varieties.
    Suppose that \( V \) is projective.
    Then \( \varphi \) is closed.
\end{proposition}
\begin{proof}
    Factorise \( \varphi \) as \( V \to \Gamma_\varphi \subseteq V \times W \to W \), where \( \Gamma_\varphi = \qty{(x, \varphi(x)) \mid x \in V} \) is the graph of \( \varphi \).
    Note that \( \Gamma_\varphi \) is closed as it is the preimage of the diagonal \( \varphi \times \mathrm{id} \colon V \times W \to W \times W \).
    The diagonal \( W \subseteq W \times W \) is closed, even though \( W \times W \) is not given the product topology.
    Now, \( V \subseteq \mathbb P^n \) is a closed subset as it is a projective variety.
    Hence, it suffices to show that the projection map \( \mathbb P^n \times W \to W \) is closed.
    Moreover, if \( W \) is covered by affine varieties \( \qty{U_i} \), it further suffices to show that \( \mathbb P^n \times U_i \to U_i \) is closed for all \( i \).
    Any quasi-projective variety is covered by affine varieties as required.
    Finally, each \( U_i \) is a closed subset of \( \mathbb A^m \) for some \( m \) with its subspace topology.
    It therefore suffices to show \( \mathbb P^n \times \mathbb A^m \to \mathbb A^m \) is closed, which is the fundamental theorem of elimination theory.
\end{proof}
We can now prove part (i) of the above theorem.
Part (ii) is nonexaminable, and part (iii) will be shown later.
\begin{corollary}
    Let \( \varphi \colon V \to W \) be a non-constant map between irreducible projective curves.
    Then \( \varphi \) is surjective.
\end{corollary}
\begin{proof}
    The image of \( \varphi \) is closed, so either a finite set of points or \( W \) itself.
    Since it is non-constant, \( \varphi \) is surjective.
\end{proof}
\begin{corollary}
    Let \( V \) be a smooth projective irreducible curve, and let \( f \in \mathbb C(V)^\star \).
    Then,
    \begin{enumerate}
        \item if \( f \) is regular at all points \( P \in V \), then \( f \in \mathbb C^\star \) is a constant;
        \item the set of \( P \in V \) such that \( \nu_P(f) \neq 0 \) is finite, and \( \sum_{P \in V} \nu_P(f) = 0 \).
    \end{enumerate}
\end{corollary}
\begin{proof}
    \emph{Part (i).}
    Given \( f \), consider the morphism \( \varphi = (1 : f) \colon V \to \mathbb P^1 \).
    \( \varphi \) is a morphism because \( C \) is smooth.
    We want to find zeroes and poles of \( f \).
    \( \varphi(P) = (1:0) \) if and only if \( f(P) = 0 \), and \( \varphi(P) = (0:1) \) if and only if \( f \) is not regular at \( P \).
    This means that if \( f \) is everywhere regular, \( \varphi \) is not surjective, so it is constant.

    \emph{Part (ii).}
    We can assume \( f \) is non-constant.
    Let \( t \) denote the rational function \( \frac{X_1}{X_0} \) on \( \mathbb P^1 \).
    By the pullback, we obtain \( \varphi^\star t \in \mathbb C(V) \) is exactly \( \frac{f}{1} = f \).
    For convenience, \( (1:0) \in \mathbb P^1 \) will be denoted 0, and \( (0:1) \in \mathbb P^1 \) will be denoted \( \infty \).

    Observe that \( t \) is a local parameter at \( 0 \in \mathbb P^1 \), so if \( f(P) = 0 \), \( e_P = \nu_P(\varphi^\star t) = \nu_P(f) \).
    Similarly, \( \frac{1}{t} = \frac{X_0}{X_1} \) is a local parameter at \( \infty \in \mathbb P^1 \), so if \( f(P) = \infty \), we have \( e_P = \nu_P(\varphi^\star \frac{1}{t}) = -\nu_P(f) \).
    Finally, if \( f(P) \neq 0, \infty \), then \( \nu_P(f) = 0 \).
    By the previous theorem, \( \deg \varphi = \sum_{\varphi(P) = 0} \nu_P(f) = \sum_{\varphi(P) = \infty} -\nu_P(f) \), giving the desired result.
\end{proof}
Hence, there are no non-constant holomorphic functions.

\subsection{Divisor theory}
We will only consider smooth projective irreducible curves from now on.
Let \( V \) be a curve.
There is a natural inclusion from the space of functions defined everywhere on \( V \) (isomorphic to \( \mathbb C \)) to the field of rational functions on \( V \).
However, this field \( \mathbb C(V) \) is very large and difficult to study directly.
The goal of divisor theory is to organise \( \mathbb C(V) \) into manageable (finite-dimensional) pieces.

Note that a rational function \( f \in \mathbb C(V) \) determines an open subset \( U \subseteq V \) on which \( f \) is well-defined as a function \( U \to \mathbb C \).
For instance, we could define \( U = V \setminus \qty{x \mid \nu_P(f) < 0} \), which is \( V \) with a finite set of points removed.
One idea is to study functions \( f \in \mathbb C(V) \) that are well-defined away from a fixed set \( \qty{P_1, \dots, P_n} \).
\begin{definition}
    A \emph{divisor} \( D \) on a curve \( V \) is a finite formal linear combination \( \sum_{P \in V} n_P[P] \), or equivalently, an element of the free abelian group \( \bigoplus_{P \in V} \mathbb Z[P] \).
    If \( D = \sum_{P \in V} n_P [P] \), its \emph{degree} is \( \deg D = \sum_{P \in V} n_P \in \mathbb Z \).
\end{definition}
Note that \( \deg \colon \mathrm{Div}(V) \to \mathbb Z \) is a group homomorphism.
The kernel of \( \deg \) is denoted \( \mathrm{Div}^0(V) \).
If \( D = \sum n_P [P] \), we write \( \nu_P(D) = n_P \).
\begin{definition}
    Let \( D \in \mathrm{Div}(V) \).
    The space of rational functions on \( V \) with poles bounded by \( D \) is
    \[ L(D) = \qty{f \in \mathbb C(V) \mid \forall P \in V,\, \nu_P(f) + \nu_P(D) \geq 0} \]
\end{definition}
For instance, if \( \nu_P(D) > 0 \), \( f \) is allowed to have a pole at \( P \) of order at most \( \nu_P(D) \).
If \( \nu_P(D) < 0 \), \( f \) is forced to have a zero at \( P \) of order at least \( -\nu_P(D) \).
\begin{definition}
    Let \( f \in \mathbb C(V)^\star \).
    The \emph{divisor of \( f \)}, is \( \operatorname{div}(f) = \sum_{P \in V} \nu_P(f)[P] \).
\end{definition}
Divisors of rational functions must have degree 0.
Divisors of the form \( \operatorname{div}(f) \) are called \emph{principal divisors}.
The set \( \mathrm{Prin}(V) \) is the set of divisors \( D \in \mathrm{Div}(V) \) such that \( D = \operatorname{div}(f) \) for some \( f \in \mathbb C(V) \), and this is a subgroup of \( \mathrm{Div}^0(V) \), as \( \operatorname{div}(f \cdot g) = \operatorname{div}f + \operatorname{div}g \).

The quotient \( \faktor{\mathrm{Div}(V)}{\mathrm{Prin}(V)} \) is noted \( \mathrm{Pic}(V) = \mathrm{Cl}(V) \), and this is called the \emph{Picard group} or \emph{class group} of \( V \).
The Picard group and class group coincide for smooth varieties, but are different in the study of general varieties and schemes.

Divisors \( D, D' \) are called \emph{linearly equivalent} if \( D - D' \) is \( \mathrm{div}(f) \) for some \( f \in \mathbb C(V) \), so \( D \) is equivalent to \( D' \) in \( \mathrm{Pic}(V) \).
We write \( D \sim D' \).
\begin{proposition}
    Every degree 0 divisor on \( \mathbb P^1 \) is principal.
\end{proposition}
Note that every principal divisor is degree 0 in general.
\begin{proof}
    Identify \( \mathbb P^1 \) with \( \mathbb C \cup \qty{\infty} \), where \( \mathbb C \hookrightarrow \qty{(1:z) \mid z \in \mathbb C} \).
    Then, \( D = \sum_{a \in \mathbb C} n_a [a] + n_\infty [\infty] \).
    Note that \( n_\infty = -\sum_{a \in \mathbb C} n_a \).
    Let \( f = \prod_{a \in \mathbb C} (t-a)^{n_a} \).
    This has a zero of order \( n_a \) at \( a \).
    Hence, \( \operatorname{div} f = D \); clearly, \( \nu_a(\operatorname{div} f) = n_a \) for \( a \in \mathbb C \), and \( \frac{1}{t-a} \) is a local coordinate at \( \infty \) for all \( a \in \mathbb C \) where \( t = \frac{X_1}{X_0} \), then we can calculate explicitly \( \nu_\infty(\operatorname{div} f) = n_\infty \).
\end{proof}
It is not always the case that every degree 0 divisor on a curve \( V \) is principal and \( \mathrm{Piv}(V) \) is nontrivial; this gives rise to the notion of genus.
\begin{definition}
    Let \( V \subseteq \mathbb P^n \) be a curve.
    Consider the hyperplane \( \mathbb V(L) \subseteq \mathbb P^n \) where \( L \) is a homogeneous linear polynomial.
    Assume \( V \not\subseteq \mathbb V(L) \).
    The \emph{hyperplane section} of \( V \) by \( \mathbb V(L) \) is \( \operatorname{div}L = \sum_{P \in V} n_P [P] \), where if \( X_i(P) \neq 0 \), \( n_P = \nu_P\qty(\frac{L}{X_i}) \).
\end{definition}
This is well-defined as \( \nu_P\qty(\frac{L}{X_i}) = \nu_P\qty(\frac{L}{X_j}) \) for \( X_i(p) \neq 0, X_j(P) \neq 0 \), as \( \frac{X_i}{X_j} \in \mathcal O_{V,P}^\star \) so \( \nu_P\qty(\frac{X_i}{X_j}) = 0 \).
Note that all \( n_P \) are nonnegative in this case.
\begin{proposition}
    Let \( V \subseteq \mathbb P^n \) be as above, and let \( L, L' \) be linear homogeneous polynomials, neither vanishing on \( V \).
    Then there is an equality
    \[ \operatorname{div}L - \operatorname{div}L' = \operatorname{div}\qty(\frac{L}{L'}) \]
    In particular, \( \operatorname{div}L - \operatorname{div}L' \) is principal, and \( \deg \operatorname{div}L = \deg \operatorname{div}L' \).
\end{proposition}
\begin{definition}
    Let \( V \subseteq \mathbb P^n \) be a curve.
    Then the \emph{degree} of \( V \) is \( \deg \operatorname{div} L \) where \( V \not\subseteq \mathbb V(L) \).
\end{definition}
\begin{remark}
    A line in \( \mathbb P^2 \) is degree 1.
    A conic is degree 2.
\end{remark}
We can generalise these notions.
\begin{enumerate}
    \item If \( \varphi \colon V \to \mathbb P^n \) is any non-constant morphism, and \( L \) is a linear form, we can similarly define \( \operatorname{div}L \) by using \( \sum_{P \in V} n_P [P] \) where \( n_P = \nu_P\qty(\frac{\varphi^\star L}{X_i}) \) where \( X_i(P) \neq 0 \).
    This generalises the case where \( \varphi \) is an inclusion.
    As before, we assume \( \mathbb V(L) \) does not contain \( \Im \varphi \).
    Note that this map need not be injective.
    \item If \( G \) is homogeneous of degree \( m \geq 1 \) and \( \varphi \colon V \to \mathbb P^n \), one can similarly define \( \operatorname{div} G = \sum_{P \in V} n_P [P] \) where \( n_P = \nu_P\qty(\frac{\varphi^\star G}{X_i^m}) \) for any \( i \) such that \( X_i(P) \neq 0 \).
\end{enumerate}
\begin{theorem}[weak form of B\'ezout's theorem]
    Let \( V, V' \subseteq \mathbb P^2 \) be smooth projective irreducible curves of degrees \( m, n \).
    Then if \( V \neq V' \), the number of intersection points of \( V \) and \( V' \) is at most \( mn \).
\end{theorem}
We have already shown that this is the case when \( V' \) is a line on an example sheet.
\begin{proof}
    Suppose \( V, V' \) are cut out by \( \mathbb V(F), \mathbb V(G) \) of degrees \( m, n \).
    We claim that the degree of \( \operatorname{div} G \) as a divisor on \( V \) is \( mn \).
    We can replace \( G \) by any other homogeneous polynomial of degree \( m \) by the previous proposition as it gives a linearly equivalent divisor.
    Replace \( G \) with \( L^m \) for a homogeneous linear polynomial \( L \).
    Now, \( \mathbb V(L) \cap V \) has size at most \( n = \deg V \), so \( \deg \operatorname{div} \varphi^\star G = nm \) as required, since \( \operatorname{div}(\varphi^\star G) = \sum_{P \in V \cap \mathbb V(G)} n_P [P] \) where \( n_P > 0 \) (note that if \( n_P > 0 \) then \( G \) vanishes at \( P \)).
\end{proof}
\begin{definition}
    A divisor \( D \) is called \emph{effective} if \( D = \sum n_P [P] \) for \( n_P \geq 0 \).
\end{definition}
Recall that
\[ L(D) = \qty{f \in \mathbb C(V) \mid f = 0 \text{ or } \operatorname{div}f + D \geq 0 \text{ pointwise}} \]
is equivalently the set of \( f \in \mathbb C(V) \) such that \( \operatorname{div}f + D \) is effective.
\begin{proposition}
    The set \( L(D) \) is a complex vector subspace of \( \mathbb C(V) \).
\end{proposition}
\begin{proof}
    \( \nu_P(f+g) \geq \min\qty{\nu_P(f), \nu_P(g)} \), hence sums of the form \( f + g \) lie in \( L(D) \) if \( f, g \in L(D) \).
    Clearly \( L(D) \) is closed under scalar multiplication.
\end{proof}
\begin{definition}
    Denote \( \dim_{\mathbb C} L(D) = \ell(D) \).
\end{definition}
\begin{example}
    Let \( \infty \) denote the point \( (0:1) \in \mathbb P^1 \), and let \( D = m [\infty] \) where \( m \geq 0 \).
    Writing \( t = \frac{X_1}{X_0} \), \( L(D) \) is spanned by \( 1, t, t^2, \dots, t^m \).
    Hence, \( \ell(D) = m + 1 \).
\end{example}
\begin{proposition}
    Let \( D \) be a divisor on \( V \).
    Then,
    \begin{enumerate}
        \item If \( \deg D < 0 \), then \( L(D) = 0 \).
        \item If \( \deg D \geq 0 \), then \( \ell(D) \leq \deg D + 1 \).
        \item For any \( P \in V \), \( \ell(D) \leq \ell(D - P) + 1 \).
    \end{enumerate}
    In particular, \( L(D) \) is always finite-dimensional.
\end{proposition}
\begin{proof}
    \emph{Part (i).}
    If \( L(D) \neq 0 \) then there exists \( f \neq 0 \) with \( f \in L(D) \) such that \( \operatorname{div} f + D \geq 0 \).
    But taking degrees, \( \deg \operatorname{div} f = 0 \) hence \( \deg D \geq 0 \), a contradiction.

    \emph{Part (iii).}
    Let \( n = \nu_P(D) \).
    Define \( \mathrm{ev}_P \colon L(D) \to C \) by \( f \mapsto (\pi_P^n f)(P) \), intuitively extracting the first nonzero term of the power series defining \( f \) at \( P \).
    The kernel of this homomorphism is \( L(D-P) \).

    \emph{Part (ii).}
    This now follows from parts (i) and (iii).
    If \( d = \deg D \), then \( \ell(D) \leq \ell(D - (d+1)P) + d + 1 = d + 1 \) where the latter equality holds as \( \deg(D - (d + 1)P) < 0 \).
\end{proof}
\begin{proposition}
    Let \( D, E \) be divisors on a curve \( V \) such that \( D \sim E \), or equivalently, \( D - E \) is principal.
    Then \( L(D) \) and \( L(E) \) are isomorphic as complex vector spaces.
    In particular, \( \ell(D) = \ell(E) \).
\end{proposition}
\begin{proof}
    If \( D - E \) is principal, it can be written as \( \mathrm{div}(g) \).
    Multiplication by \( g \) (respectively \( g^{-1} \)) gives a linear map (respectively its inverse) \( L(D) \to L(E) \).
\end{proof}

\subsection{Differentials}
Differentials on curves will allow us to tackle some interesting questions.
\begin{enumerate}
    \item Given \( D \in \mathrm{Div}(V) \), can we calculate (or bound) \( \ell(D) \)?
    \item (Brill--Noether theory) For what integers \( r, d \) does a curve \( V \) admit a morphism \( \varphi \colon V \to \mathbb P^r \) of degree \( d \) such that \( \Im V \) is not contained in a hyperplane?
    \item (Hurwitz problem) When does there exist a morphism \( V \to W \) of smooth projective curves?
\end{enumerate}
\begin{definition}
    Let \( K / \mathbb C \) be a field extension.
    The \emph{space of differentials}, written \( \Omega_{K/\mathbb C} \), is the quotient vector space \( \faktor{M}{N} \) where \( M \) is the \( K \)-vector space spanned by symbols \( \delta x \) where \( x \in K \), and \( N \) is the subspace of \( M \) generated by
    \[ \delta(x + y) - \delta(x) - \delta(y);\quad \delta(xy) - x\delta(y) - y\delta(x);\quad \delta(a) \]
    where \( x, y \in K, a \in \mathbb C \).
    Given \( x \in K \), we define \( \dd{x} = \delta x + N \in \Omega_{K/\mathbb C} \).
    The \emph{exterior derivative} is the \( \mathbb C \)-linear map \( \mathrm{d} \colon K \to \Omega_{K/\mathbb C} \) mapping \( x \) to \( \dd{x} \).
\end{definition}
\begin{remark}
    More generally, if \( \varphi \colon A \to B \) is a ring homomorphism, we could have defined \( \Omega_\varphi = \Omega_{B/A} \) as a \( B \)-module as above.
\end{remark}
\begin{definition}
    Let \( U \) be a \( K \)-vector space.
    A \( \mathbb C \)-linear transformation \( D \colon K \to U \) is called a \emph{derivation} if \( D(xy) = xD(y) + yD(x) \).
\end{definition}
\begin{example}
    The map \( \mathrm{d} \colon K \to \Omega_{K/\mathbb C} \) is a derivation.
    The map \( \dv{x} \colon \mathbb C(X) \to \mathbb C(X) \) is a derivation.
\end{example}
\begin{lemma}[universal property]
    Let \( U \) be a \( K \)-vector space
    A map \( D \colon K \to U \) is a derivation if and only if there is a \( K \)-linear map \( \lambda \colon \Omega_{K/\mathbb C} \to U \) such that \( \lambda(\dd{x}) = D(x) \) for all \( x \in K \).
    % https://q.uiver.app/?q=WzAsMyxbMSwwLCJLIl0sWzAsMSwiXFxPbWVnYV97Sy9cXG1hdGhiYiBDfSJdLFsxLDIsIlUiXSxbMCwxLCJkIiwyXSxbMSwyLCJcXGxhbWJkYSIsMix7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRhc2hlZCJ9fX1dLFswLDIsIkQiXV0=
    \[\begin{tikzcd}
        & K \\
        {\Omega_{K/\mathbb C}} \\
        & U
        \arrow["d"', from=1-2, to=2-1]
        \arrow["\lambda"', dashed, from=2-1, to=3-2]
        \arrow["D", from=1-2, to=3-2]
    \end{tikzcd}\]
\end{lemma}
The proof is very simple and omitted.
Intuitively, \( \mathrm{d} \colon K \to \Omega_{K/\mathbb C} \) is the `best possible' derivation.
\begin{remark}
    For any derivation \( D \), if \( y \in K \) and \( y \neq 0 \), \( D(x) = D\qty(y \cdot \frac{x}{y}) = yD\qty(\frac{x}{y}) + \frac{x}{y} D(y) \), giving the quotient rule.
    \[ D\qty(\frac{x}{y}) = \frac{yDx - xDy}{y^2} \]
\end{remark}
\begin{lemma}
    \begin{enumerate}
        \item Let \( f = \frac{h}{g} \in \mathbb C(X_1, \dots, X_n) \) and write \( y = f(x_1, \dots, x_n) \) for \( x_1, \dots, x_n \in K \).
        Then
        \[ \dd{y} = \sum_{i=1}^n \pdv{f}{X_i}\qty(x_1, \dots, x_n) \dd{x_i} \]
        \item If \( K = \mathbb C(x_1, \dots, x_n) \) for \( x_i \in K \), then \( \Omega_{K/\mathbb C} \) is spanned by \( \dd{x_1}, \dots, \dd{x_n} \) as a \( K \)-vector space.
    \end{enumerate}
\end{lemma}
\begin{proof}
    Part (i) follows from the rules of calculus for \( \dd{(xy)} \), \( \dd{\qty(\frac{x}{y})} \) and \( \mathbb C \)-linearity.
    Part (ii) is immediate from part (i).
\end{proof}
We have obtained divisors in two different ways: from rational functions, and from hyperplane sections of \( V \to \mathbb P^r \).
We will do the reverse, we will first construct divisors, and then use them to build maps \( V \to \mathbb P^r \).
Differentials are another way to construct divisors.

From now, we will write \( \Omega_K \) for \( \Omega_{K/\mathbb C} \).
\begin{theorem}
    Let \( K/\mathbb C(t) \) be finite, with \( t \) transcendental over \( \mathbb C \).
    Then \( \Omega_K \) is one-dimensional as a \( K \)-vector space, and is spanned by \( \dd{t} \).
\end{theorem}
\begin{proof}
    First, suppose \( K = \mathbb C(t) \), the function field of \( \mathbb P^1 \).
    By the lemma above, \( \Omega_K \) is spanned by \( \dd{t} \).
    We need to show that \( \Omega_K \) is nonzero, then it is clearly one-dimensional.
    By the universal property, it suffices to exhibit a single nonzero derivation on \( K \).
    The function \( \dv{t} \) is one such derivation.

    Now suppose \( K \neq \mathbb C(t) \).
    Write \( K_0 = \mathbb C(t) \), so \( K = \mathbb C(t,\alpha) = K_0(\alpha) \) for \( \alpha \in K \setminus K_0 \) algebraic over \( K_0 \).
    Let \( h(t) \in K_0[X] \) be the minimal polynomial of \( \alpha \).
    By minimality of \( h \), \( h'(\alpha) \neq 0 \) as it does not have a double root.
    By the previous lemma, \( \dd{t}, \dd{\alpha} \) span \( \Omega_K \) as a \( K \)-vector space.

    If \( f \in K_0[X] \), write \( D_t f \) for \( \pdv{f}{t} \), by \( t \)-differentiating the coefficients.
    The lemma gives \( 0 = \dd{(h(\alpha))} = D_t h(\alpha) \dd{t} + h'(\alpha) \dd{\alpha} \).
    Hence \( \Omega_K \) is spanned by \( \dd{t} \), so it suffices to show \( \Omega_K \) is nonzero.
    As in the first part, it suffices to exhibit a single nonzero derivation on \( K \).

    First, define \( D \colon K_0[X] \to K \) by \( D(f) = D_t f \) if \( f \in K_0 \), \( D(X) = \frac{-(D_t h)(\alpha)}{h'(\alpha)} \), and \( D(X^n) = n\alpha^{n-1} D(X) \).
    One can check that the ideal \( hK_0[X] \) is mapped to zero under \( D \).
    This exhibits a nonzero derivation as required.
\end{proof}
Denote \( \Omega_V = \Omega_{\mathbb C(V)/\mathbb C} \).
Elements of \( \Omega_V \) are called \emph{rational differentials}.
A differential \( \omega \in \Omega_V \) is \emph{regular} at a point \( P \in V \) if \( \omega \) can be expressed as \( \sum_i f_i \dd{g_i} \) where \( f_i, g_i \in \mathcal O_{V,P} \).
Write
\[ \Omega_{V,P} = \qty{\omega \in \Omega_V \mid \omega \text{ regular at } P} \subseteq \Omega_V \]
Note that \( \Omega_{V,P} \) is not a vector subspace over \( \mathbb C(V) \), since we can multiply by functions that are not regular.
However, it is a module over \( \mathcal O_{V,P} \).

Recall that \( \mathcal O_{V,P} \) contains the maximal ideal \( \mathfrak m_P \), which is principal, giving local coordinates.
We can make a similar construction in the context of differentials.
\begin{theorem}
    \( \Omega_{V,P} \) is a free \( \mathcal O_{V,P} \)-module generated by \( \dd{\pi_P} \) where \( \pi_P \) is a local coordinate at \( P \).
    In other words, \( \Omega_{V,P} = \qty{f\dd{\pi_P} \mid f \in \mathcal O_{V,P}} \).
\end{theorem}
\begin{remark}
    If \( \pi, \pi' \) are local coordinates at \( P \), \( \dd{\pi} = u \dd{\pi'} \) where \( u \in \mathcal O_{V,P}^\star \).
    More generally, if \( \omega \in \Omega_V \), then \( \pi^j \omega \) is regular, so lies in \( \Omega_{V,P} \), for sufficiently large \( k \).
    Given this theorem, we can always write \( \omega \in \Omega_V \) as \( f \dd{\pi_P} \) where \( \pi_P \) is a local coordinate at \( P \) and \( f \in \mathbb C(V) \).
\end{remark}
\begin{definition}
    Let \( \omega \in \Omega_V \) and \( P \in V \).
    Define \( \nu_P(\omega) = \nu_P(f) \) where \( \omega = f \dd{\pi_P} \) and \( \pi_P \) is a local coordinate at \( P \).
\end{definition}
\begin{lemma}
    Let \( \omega \in \Omega_V \) be a nonzero differential.
    Then, \( \nu_P(\omega) \neq 0 \) for only finitely many points \( P \).
\end{lemma}
\begin{proof}
    As \( \nu_P(f \dd{g}) = \nu_P(f) + \nu_P(\dd{g}) \) and \( \nu_P(f) = 0 \) for all but finitely many points, it suffices to only prove this lemma for the case \( \omega = \dd{g} \).
    Moreover, as \( g \) must be non-constant as \( \dd{g} \neq 0 \), we can assume that \( g \) is transcendental.
    hence, \( \faktor{\mathbb C(V)}{\mathbb C(g)} \) is a finite extension.
    Consider \( (1 : g) \colon V \to \mathbb P^1 \).
    By the finiteness theorem for rational functions, there are only finitely many \( P \in V \) such that \( g(P) = \infty \) or \( e_P > 1 \).

    If \( P \) is a point where \( e_P = 1 \), so the function is unramified, \( \varphi^\star (t - g(P)) \) is a local coordinate at \( P \).
    But \( \varphi^\star(t-g(P)) \) is \( g - g(P) \), so \( \nu_P(\dd{g}) = 0 \).
\end{proof}
Differentials provide another source of divisors.
\begin{definition}
    Let \( \omega \in \Omega_V \).
    Then \( \operatorname{div} \omega = \sum_{P \in V} \nu_P(\omega) [P] \).
\end{definition}
\begin{proposition}
    Let \( \omega, \omega' \) be nonzero rational differentials on \( V \).
    Then, \( \operatorname{div}\omega - \operatorname{div}\omega' \) is principal.
\end{proposition}
\begin{proof}
    Since \( \operatorname{div}\omega \) is one-dimensional over \( \mathbb C(V) \), we can write \( \omega = f \omega' \) where \( f \in \mathbb C(V) \).
\end{proof}
If \( \omega \) is a nonzero differential, \( \operatorname{div} \omega \) gives a well-defined element in \( \mathrm{Pic}(V) = \mathrm{Cl}(V) = \faktor{\mathrm{Div}(V)}{\mathrm{Prin}(V)} \).
We say that \( \operatorname{div}\omega \) is a \emph{canonical divisor}, and its equivalence class is the \emph{canonical class}, denoted \( K_V \).
Sometimes \( K_V \) is also simply called the canonical divisor.

We now prove the above theorem.
\begin{proof}
    We want to check that \( \dd{\pi_P} \) generates the module \( \Omega_{V,P} \) over \( \mathcal O_{V,P} \).
    Clearly \( \mathcal O_{V,P} \dd{\pi_P} \subseteq \Omega_{V,P} \); we want to check that the converse holds.
    Given \( f \in \mathcal O_{V,P} \), \( f - f(P) \in \mathfrak m_P \).
    Hence, \( f = f(P) + \pi_P g \in \mathcal O_{V,P} \) where \( g \in \mathcal O_{V,P} \).
    By the Leibniz rule, \( \dd{f} = g \dd{\pi_P} + \pi_P \dd{g}  \in \mathcal O_{V,P} \dd{\pi_P} + \pi_P \Omega_{V,P} \).
    Assume that \( \Omega_{V,P} \) is finitely generated.
    Observe that
    \[ \mathcal O_P \dd{\pi_P} \subseteq \Omega_{V,P} \subseteq \mathcal O_P \dd{\pi_P} + \pi_P \Omega_{V,P} \]
    Apply Nakayama's lemma to \( R = \mathcal O_{V,P}, J = \mathfrak m_P, M = \Omega_{V,P}, N = \mathcal O_{V,P} \dd{\pi_P} \).

    To show \( \Omega_{V,P} \) is finitely generated, choose an affine patch \( V_0 \subseteq V \) containing \( P \).
    Then \( C[V_0] = \mathbb C[x_1, \dots, x_n] \) where the \( x_i \) generate \( \mathbb C[V_0] \).
    If \( f \in \mathcal O_{V,P} \), we can write \( f = \frac{g}{h} \) where \( g, h \) are polynomials and \( h(P) \neq 0 \).
    Thus
    \[ \dd{f} = \sum_{i=1}^n \qty(\frac{h\pdv{g}{X_i} - g\pdv{h}{X_i}}{h^2})(x_1, \dots, x_n) \dd{x_i} \]
    But \( h(P) \neq 0 \), so \( \dd{f} \) is in the \( \mathcal O_{V,P} \)-span of \( \qty{\dd{x_i}} \).
\end{proof}
\begin{example}
    Let \( V = \mathbb P^1 \), and let \( t \) be the coordinate on the standard \( \mathbb A^1 \subseteq \mathbb P^1 \).
    For any \( a \in \mathbb C \), the rational function \( (t - a) \) is a local coordinate.
    At infinity, \( \frac{1}{t} \) is a local coordinate.

    We now calculate \( \operatorname{div} \dd{t} \).
    We have \( \nu_a(\dd{t}) = \nu_a(\dd{(t-a)}) = 0 \) for all \( a \in \mathbb C \).
    Note that \( \dd{t} = -t^2 \dd{\qty(\frac{1}{t})} \) so
    \[ \nu_\infty(\dd{t}) = \nu_\infty\qty(\frac{-1}{\qty(\frac{1}{t})^2} \dd{\qty(\frac{1}{t})}) = -2 \]
    Hence \( \operatorname{div} \dd{t} = -2[\infty] \), so the degree is nonzero, hence this divisor is not principal.
\end{example}
\begin{definition}
    Let \( V \) be a curve.
    The \emph{genus} of \( V \) is \( g(V) = \ell(K_V) \).
\end{definition}
\( L(K_V) \) is not well-defined, but \( \ell(K_V) \) is.
Note that if \( V = \mathbb P^1 \), then \( \operatorname{div}\dd{t} = -2[\infty] \), so \( \ell(K_{\mathbb P^1}) = 0 \), as there are no rational functions on \( \mathbb P^1 \) that vanish to order 2 at infinity, apart from the zero function.

\subsection{Differentials on plane curves}
We will study curves in \( \mathbb P^2 \).
\begin{example}[smooth plane cubics]
    Consider \( V = \mathbb V(F) \subseteq \mathbb P^2 \) where \( F = X_0 X_2^2 - \prod_{i=1}^3 (X_1 - \lambda_i X_0) \) with \( \lambda_1, \lambda_2, \lambda_3 \) distinct complex numbers.
    This curve is nonsingular.
    To calculate the genus, we take the following steps.
    \begin{enumerate}
        \item We first use the affine equation \( f(x,y) = y^2 - \prod_{i=1}^3 (x - \lambda_i) \), and write \( f(x,y) = y^2 - g(x,y) \).
        Differentiating, \( 2y \dd{y} = g'(x) \dd{x} \) is a nontrivial relation in \( \Omega_V \).
        \item Using this relation, we choose a convenient differential \( \omega \in \Omega_V \); in this case, we will choose \( \omega = \frac{\dd{x}}{y} \).
        \item Calculate \( \operatorname{div}\omega \) by using the fact that if \( \pdv{f}{y}\qty(P) \) is nonzero, \( x - x(P) \) is a local parameter, and if \( \pdv{f}{x}\qty(P) \) is nonzero, \( y - y(P) \) is a local parameter.
    \end{enumerate}
    % see notes for example for the actual calculation
    We find that \( K_V = 0 \).
    Hence, \( g(V) = 1 \) as \( \ell(0) = 1 \).
\end{example}
\begin{theorem}
    Let \( V \) be a smooth plane cubic.
    Then \( g(V) = 1 \), and in particular, \( V \not\simeq \mathbb P^1 \).
\end{theorem}
\begin{proof}
    Change coordinates into the example above.
\end{proof}
\begin{theorem}
    Let \( V = \mathbb V(F) \subseteq \mathbb P^2 \) be a smooth projective plane curve of degree \( d \).
    Then \( K_V = (d - 3)H \) where \( H \) is the divisor class associated to a hyperplane section of \( V \).
\end{theorem}
\begin{proof}
    First, we will select a differential \( \omega \in \Omega_V \).
    Change coordinates such that \( (0 : 1 : 0) \not\in V \).
    Let \( x = \frac{X_1}{X_0}, y = \frac{X_2}{X_0} \) be elements of \( \mathbb C(V) \).
    Set \( f(X,Y) = F(1,X,Y) \), so \( f(x,y) = 0 \) in \( \mathbb C(V) \).
    Differentiating, \( \pdv{f}{X}\qty(x,y) \dd{x} + \pdv{f}{Y}\qty(x,y) \dd{y} = 0 \) is a relation in \( \Omega_V \).
    Choose
    \[ \omega = \frac{\dd{x}}{\pdv{f}{Y}\qty(x,y)} = \frac{-\dd{y}}{\pdv{f}{X}\qty(x,y)} \]
    Then, we will calculate \( \operatorname{div}\dd{\omega} \) in this affine patch.
    If \( \pdv{f}{Y}\qty(P) \neq 0 \), then \( x - x(P) \) is a local coordinate at \( P \).
    Then, \( \nu_P(\omega) = \nu_P\qty(\frac{1}{\pdv{f}{Y}}\qty(x,y)) = 0 \).
    Otherwise, \( \pdv{f}{X}\qty(P) \neq 0 \) by smoothness, so \( y - y(P) \) is a local coordinate and \( \nu_P(\omega) = 0 \).

    Since \( (0 : 1 : 0) \not\in V \), any point at infinity in \( V \) is not contained in \( \qty{X_2 = 0} \).
    The equation for \( V \) on the patch \( \qty{X_2 \neq 0} \) is \( g(z,w) = 0 \) where \( z = \frac{X_0}{X_2} = \frac{1}{y} \) and \( y = \frac{X_1}{X_2} = \frac{x}{y} \) and \( g(Z,W) = F(Z,W,1) \) in \( \mathbb C[Z,W] \).
    Select a different differential
    \[ \eta = \frac{\dd{z}}{\pdv{g}{W}\qty(z,w)} = \frac{-\dd{w}}{\qty{g}{Z}\qty(z,w)} \]
    By the same argument as before, \( \nu_P(\eta) = 0 \) for all \( P \) in the patch \( \qty{X_2 \neq 0} \).
    Using \( f(X,Y) = Y^d g\qty(\frac{1}{X}, \frac{X}{Y}) \) and differentiating, we find \( \omega = Z^{d-3} \eta \).
    If \( X_2(P) \neq 0 \), we calculate \( \nu_P(\omega) = (d-3)\nu_P(z) + \nu_P(\eta) = (d-3)\nu_P(z) \).
    As \( Z = \frac{X_0}{X_2} \), \( \operatorname{div} \omega = (d-3) \operatorname{div} X_0 \) as claimed.
\end{proof}
\begin{proposition}
    If \( f(x,y) = 0 \) is an affine patch equation for a smooth projective plane curve, and \( \deg f \geq 3 \), then
    \[ \qty{\frac{x^r y^s \dd{x}}{\pdv{f}{y}} \mid 0 \leq r + s \leq d - 3} \]
    is a basis for \( L(K_V) \) for the representative of \( K_V \) given by \( (d-3)H \) where \( H \) is the hyperplane at infinity.
\end{proposition}
\begin{proof}
    The proof is non-examinable, and follows from the same argument as the proof of the previous theorem.
\end{proof}
\begin{corollary}
    If \( d, d' \geq 2 \) are distinct integers, then smooth plane curves of degrees \( d, d' \) are never isomorphic.
\end{corollary}
\begin{proof}
    \( \deg K_V \) depends only on \( V \) up to isomorphism.
\end{proof}
In particular, there are infinitely many distinct curves up to isomorphism.

\subsection{Riemann--Roch theorem}
