\subsection{Definitions}
\begin{definition}
	Let \( E \) be a (nonempty) set. A collection \( \mathcal E \) of subsets of \( E \) is called a \emph{\( \sigma \)-algebra} if the following properties hold:
	\begin{itemize}
		\item \( \varnothing \in \mathcal E \);
		\item \( A \in \mathcal E \implies A^c = E \setminus A \in \mathcal E \);
		\item if \( (A_n)_{n \in \mathbb N} \) is a countable collection of sets in \( \mathcal E \), \( \bigcup_{n \in \mathbb N} A_n \in \mathcal E \).
	\end{itemize}
\end{definition}
\begin{example}
	Let \( \mathcal E = \qty{\varnothing, E} \).
	This is a \( \sigma \)-algebra.
	Also, \( \mathcal P(E) = \qty{A \subseteq E} \) is a \( \sigma \)-algebra.
\end{example}
\begin{remark}
	Since \( \bigcap_n A_n = \qty(\bigcup_n A_n^c)^c \), any \( \sigma \)-algebra \( \mathcal E \) is closed under countable intersections as well as under countable unions.
	Note that \( B \setminus A = B \cap A^c \in \mathcal E \), so \( \sigma \)-algebras are closed under set difference.
\end{remark}
\begin{definition}
	A set \( E \) with a \( \sigma \)-algebra \( \mathcal E \) is called a \emph{measurable space}.
	The elements of \( \mathcal E \) are called \emph{measurable sets}.
\end{definition}
\begin{definition}
	A \emph{measure} \( \mu \) is a set function \( \mu : \mathcal E \to [0,\infty] \), such that \( \mu(\varnothing) = 0 \), and for a sequence \( (A_n)_{n \in \mathbb N} \) such that the \( A_n \) are disjoint, we have \( \mu\qty(\bigcup_{n \in \mathbb N} A_n) = \sum_{n \in \mathbb N} \mu(A_n) \).
	This is the \emph{countable additivity} property of the measure.
\end{definition}
\begin{remark}
	If \( E \) is countable, then for any \( A \in \mathcal P(E) \) and measure \( \mu \), we have \( \mu(A) = \mu\qty(\bigcup_{x\in A} \qty{x}) = \sum_{x \in A} \mu(\qty{x}) \).
	Hence, measures are uniquely defined by the measure of each singleton.
	This corresponds to the notion of a probability mass function.
\end{remark}
\begin{definition}
	For a collection \( \mathcal A \) of subsets of \( E \), we define the \( \sigma \)-algebra \emph{\( \sigma(A) \) generated by \( \mathcal A \)} by
	\[ \sigma(\mathcal A) = \qty{A \subseteq E \colon A \in \mathcal E \text{ for all \( \sigma \)-algebras } \mathcal E \supseteq \mathcal A} \]
	So it is the smallest \( \sigma \)-algebra containing \( \mathcal A \).
	Equivalently,
	\[ \sigma(\mathcal A) = \bigcap_{\mathcal E \supseteq \mathcal A, \mathcal E \text{ a \( \sigma \)-algebra}} \mathcal E \]
\end{definition}

\subsection{Rings and algebras}
To construct good generators, we define the following.
\begin{definition}
	\( \mathcal A \subseteq \mathcal P(E) \) is called a \emph{ring} over \( E \) if \( \varnothing \in \mathcal A \) and \( A, B \in \mathcal A \) implies \( B \setminus A \in \mathcal A \) and \( A \cup B \in \mathcal A \).
\end{definition}
Rings are easier to manage than \( \sigma \)-algebras because there are only finitary operators.
\begin{definition}
	\( \mathcal A \) is called an \emph{algebra} over \( E \) if \( \varnothing \in \mathcal A \) and \( A, B \in \mathcal A \) implies \( A^c \in \mathcal A \) and \( A \cup B \in \mathcal A \).
\end{definition}
\begin{remark}
	Rings are closed under symmetric difference \( A \,\triangle\, B = (B \setminus A) \cup (A \setminus B) \), and are closed under intersections \( A \cap B = A \cup B \setminus A \,\triangle\, B \).
	Algebras are rings, because \( B \setminus A = B \cap A^c = (B^c \cup A)^c \).
	Not all rings are algebras, because rings do not need to include the entire space.
\end{remark}
\begin{proposition}[Disjointification of countable unions]
	Consider \( \bigcup_n A_n \) for \( A_n \in \mathcal E \), where \( \mathcal E \) is a \( \sigma \)-algebra (or a ring, if the union is finite).
	Then there exist \( B_n \in \mathcal E \) that are disjoint such that \( \bigcup_n A_n = \bigcup_n B_n \).
\end{proposition}
\begin{proof}
	Define \( \widetilde A_n = \bigcup_{j \leq n} A_j \), then \( B_{n+1} = \widetilde A_n \setminus \widetilde A_{n-1} \).
\end{proof}
\begin{definition}
	A \emph{set function} on a collection \( \mathcal A \) of subsets of \( E \), where \( \varnothing \in \mathcal A \), is a map \( \mu \colon \mathcal A \to [0,\infty] \) such that \( \mu(\varnothing) = 0 \).
	We say \( \mu \) is \emph{increasing} if \( \mu(A) \leq \mu(B) \) for all \( A \subseteq B \) in \( \mathcal A \).
	We say \( \mu \) is \emph{additive} if \( \mu(A \cup B) = \mu(A) + \mu(B) \) for disjoint \( A, B \in \mathcal A \) and \( A \cup B \in \mathcal A \).
	We say \( \mu \) is \emph{countably additive} if \( \mu\qty(\bigcup_n A_n) = \sum_n \mu(A_n) \) for disjoint sequences \( A_n \) where \( \bigcup_n A_n \) and each \( A_n \) lie in \( \mathcal A \).
	We say \( \mu \) is \emph{countably subadditive} if \( \mu\qty(\bigcup_n A_n) \leq \sum_n \mu(A_n) \) for arbitrary sequences \( A_n \) under the above conditions.
\end{definition}
\begin{remark}
	A measure satisfies all four of the above conditions.
\end{remark}
\begin{theorem}[Carath\'eodory's theorem]
	Let \( \mu \) be a countably additive set function on a ring \( \mathcal A \) of subsets of \( E \).
	Then there exists a measure \( \mu^\star \) on \( \sigma(\mathcal A) \) such that \( \eval{\mu^\star}_{\mathcal A} = \mu \).
\end{theorem}
We will later prove that this extended measure is unique.
\begin{proof}
	For \( B \subseteq E \), we define the \emph{outer measure} \( \mu^\star \) as
	\[ \mu^\star(B) = \inf \qty{\sum_{n \in \mathbb N} \mu(A_n), A_n \in \mathcal A, B \subseteq \bigcup_{n \in \mathbb N} A_n} \]
	If there is no sequence \( A_n \) such that \( B \subseteq \bigcup_{n \in \mathbb N} A_n \), we declare the outer measure \( \mu^\star(B) \) to be \( \infty \).
	We define the class
	\[ \mathcal M = \qty{A \subseteq E \mid \forall B \subseteq E.\,\mu^\star(B) = \mu^\star(B \cap A) + \mu^\star(B \cap A^c)} \]
	This is the class of \emph{\( \mu^\star \)-measurable sets}.

	\emph{Step 1.} \( \mu^\star \) is countably sub-additive on \( \mathcal P(E) \).
	It suffices to prove that for \( B \subseteq E \) and \( B_n \subseteq E \) such that \( B \subseteq \bigcup_n B_n \) we have
	\begin{equation}
		\mu^\star(B) \leq \sum_n \mu^\star(B_n)
		\tag{\(\dagger\)}
	\end{equation}
	We can assume without loss of generality that \( \mu^\star(B_n) < \infty \) for all \( n \), otherwise there is nothing to prove.
	For all \( \varepsilon > 0 \) there exists a collection \( A_{n,m} \) such that \( B_n \subseteq \bigcup_m A_{n,m} \) and
	\[ \mu^\star(B_n) + \frac{\varepsilon}{2^n} \geq \sum_n \mu(A_{n,m} \]
	Now, since \( \mu^\star \) is increasing, and \( B \subseteq \bigcup_n B_n \subseteq \bigcup_n \bigcup_m A_{n,m} \), we have
	\[ \mu^\star(B) \leq \mu^\star\qty(\bigcup_{n,m} A_{n,m}) \leq \sum_{n,m} \mu(A_{n,m}) \leq \sum_n \mu^\star(B_n) + \sum_n \frac{\varepsilon}{2^n} = \sum_n \mu^\star(B_n) + \varepsilon \]
	Since \( \varepsilon) \) was arbitrary in the construction, \( (\dagger) \) follows by construction.

	\emph{Step 2.} \( \mu^\star \) extends \( \mu \).
	Let \( A \in \mathcal A \), and we want to show \( \mu^\star(A) = \mu(A) \).
	We can write \( A = A \cup \varnothing \cup \dots \), hence \( \mu^\star(A) \leq \mu(A) + 0 + \dots = \mu(A) \) by definition of \( \mu^\star \).
	We need to prove the converse, that \( \mu(A) \leq \mu^\star(A) \).
	If \( \mu^\star \) is infinite, there is nothing to prove.
	For the finite case, suppose there is a sequence \( A_n \) where \( \mu(A_n) < \infty \) and \( A \subseteq \bigcup_n A_n \).
	Then, \( A = \bigcup_n (A \cap A_n) \), which is a union of elements of the ring \( \mathcal A \).
	Since \( \mu \) is a countably additive set function on \( \mathcal A \), it is countably subadditive.
	Hence \( \mu(A) \leq \sum_n \mu(A \cap A_n) \leq \sum_n \mu(A_n) \).
	Since the \( A_n \) were arbitrary, we have \( \mu(A) \leq \mu^\star(A) \) as required.

	\emph{Step 3.} \( \mathcal M \supseteq \mathcal A \).
	Let \( A \in \mathcal A \).
	We must show that for all \( B \subseteq E \), \( \mu^\star(B) = \mu^\star(B \cap A) + \mu^\star(B \cap A^c) \).
	We have \( B \subseteq (B \cap A) \cup (B \cap A^c) \cup \varnothing \cup \dots \), hence by countable subadditivity \( (\dagger) \), \( \mu^\star(B) \leq \mu^\star(B \cap A) + \mu^\star(B \cap A^c) \).
	It now suffices to prove the converse, that \( \mu^\star(B) \geq \mu^\star(B \cap A) + \mu^\star(B \cap A^c) \).
	We can assume \( \mu^\star(B) \) is finite, and assume there exists \( A_n \in \mathcal A \) such that \( B \subseteq \bigcup_n A_n \) and \( \mu^\star(B) + \varepsilon \geq \sum_n \mu(A_n) \).
	Now, \( B \cap A \subseteq \bigcup_n (A_n \cap A) \), and \( B \cap A^c \subseteq \bigcup_n (A_n \cap A^c) \).
	All of the members of these two unions are elements of \( \mathcal A \), since \( A_n \cap A^c = A_n \setminus A \).
	Therefore,
	\begin{align*}
		\mu^\star(B \cap A) + \mu^\star(B \cap A^c) &\leq \sum_n \mu(A_n \cap A) + \sum_n \mu(A_n \cap A^c) \\
		&\leq \sum_n \qty[ \mu(A_n \cap A) + \mu(A_n \cap A^c) ] \\
		&\leq \sum_n \mu(A_n) \leq \mu^\star(B) + \varepsilon
	\end{align*}
	Since \( \varepsilon \) was arbitrary, \( \mu^\star(B) = \mu^\star(B \cap A) + \mu^\star(B \cap A^c) \) as required.

	\emph{Step 4.} \( \mathcal M \) is an algebra.
	Clearly \( \varnothing \) lies in \( \mathcal M \), and by the symmetry in the definition of \( \mathcal M \), complements lie in \( \mathcal M \).
	We need to check \( \mathcal M \) is stable under finite intersections.
	Let \( A_1, A_2 \in \mathcal M \) and let \( B \subseteq E \).
	We have
	\[ \mu^\star(B) = \mu^\star(B \cap A_1) + \mu^\star(B \cap A_1^c) = \mu^\star(B \cap A_1 \cap A_2) + \mu^\star(B \cap A_1 \cap A_2^c) + \mu^\star(B \cap A_1^c) \]
	We can write \( A_1 \cap A_2^c = (A_1 \cap A_2^c)^c \cap A_1 \), and \( A_1^c = (A_1 \cap A_2)^c \cap A_1^c \).
	Hence
	\begin{align*}
		\mu^\star(B) &= \mu^\star(B \cap A_1 \cap A_2) + \mu^\star(B \cap (A_1 \cap A_2)^c \cap A_1) + \mu^\star(B \cap (A_1 \cap A_2)^c \cap A_1^c) \\
		&= \mu^\star(B \cap A_1 \cap A_2) + \mu^\star(B \cap (A_1 \cap A_2)^c)
	\end{align*}
	which is the requirement for \( A_1 \cap A_2 \) to lie in \( \mathcal M \).

	\emph{Step 5.} \( \mathcal M \) is a \( \sigma \)-algebra and \( \mu^\star \) is a measure on \( \mathcal M \).
	It suffices now to show that \( \mathcal M \) has countable unions and the measure respects these countable unions.
	Let \( A = \bigcup_n A_n \) for \( A_n \in \mathcal M \).
	Without loss of generality, let the \( A_n \) be disjoint.
	We want to show \( A \in \mathcal M \), and that \( \mu^\star(A) = \sum_n \mu^\star(A_n) \).
	By \( (\dagger) \), we have \( \mu^\star(B) \leq \mu^\star(B \cap A) + \mu^\star(B \cap A^c) + 0 + \dots \) so we need to check only the converse of this inequality.
	Also, \( \mu^\star(A) \leq \sum_n \mu^\star(A_n) \), so we need only check the converse of this inequality as well.
	Similarly to before,
	\begin{align*}
		\mu^\star(B) &= \mu^\star(B \cap A_1) + \mu^\star(B \cap A_1^c) \\
		&= \mu^\star(B \cap A_1) + \mu^\star(B \cap A_1^c \cap A_2) + \mu^\star(B \cap A_1^c \cap A_2^c) \\
		&= \mu^\star(B \cap A_1) + \mu^\star(B \cap A_2) + \mu^\star(B \cap A_1^c \cap A_2^c) \\
		&= \mu^\star(B \cap A_1) + \mu^\star(B \cap A_2) + \mu^\star(B \cap A_1^c \cap A_2^c \cap A_3) + \mu^\star(B \cap A_1^c \cap A_2^c \cap A_3^c) \\
		&= \mu^\star(B \cap A_1) + \mu^\star(B \cap A_2) + \mu^\star(B \cap A_3) + \mu^\star(B \cap A_1^c \cap A_2^c \cap A_3^c) \\
		&= \cdots \\
		&= \sum_{n \leq N} \mu^\star(B \cap A_n) + \mu^\star(B \cap A_1^c \cap \dots \cap A_N^c)
	\end{align*}
	Since \( \bigcup_{n \leq N} A_n \subseteq A \), we have \( \bigcap_{n \leq N} A_n^c \supseteq A^c \).
	\( \mu^\star \) is increasing, hence, taking limits,
	\[ \mu^\star(B) \geq \sum_{n=1}^\infty \mu^\star(B \cap A_n) + \mu^\star(B \cap A^c) \]
	By \( (\dagger) \),
	\[ \mu^\star(B) \geq \mu^\star(B \cap A) + \mu^\star(B \cap A^c) \]
	as required.
	Hence \( \mathcal M \) is a \( \sigma \)-algebra.
	For the other inequality, we take the above result for \( B = A \).
	\[ \mu^\star(A) \geq \sum_{n=1}^\infty \mu^\star(A \cap A_n) + \mu^\star(A \cap A^c) = \sum_{n=1}^\infty \mu^\star(A_n) \]
	So \( \mu^\star \) is countably additive on \( \mathcal M \) and is hence a measure on \( \mathcal M \).
\end{proof}
